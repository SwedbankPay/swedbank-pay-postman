{
	"info": {
		"_postman_id": "7a50040f-3425-4987-ac08-b708f1103c1a",
		"name": "Payments",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Credit Account",
			"item": [
				{
					"name": "create payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const paymentId = responseBody.payment.id;\r",
									"    pm.environment.set(\"paymentId\", paymentId);\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId,\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"CreditAccount\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"creditAccount\": {\n    \t\"creditAccountType\": \"CreditAccount{{countryType}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/psp/creditaccount/payments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"psp",
								"creditaccount",
								"payments"
							]
						}
					},
					"response": [
						{
							"name": "create payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"CreditAccount\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference123897\",\n            \"payeeName\": \"test merchant\"\n        }\n    },\n    \"creditAccount\": {\n        \"creditAccountType\": \"CreditAccountSe\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "1502"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:33:56 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c\",\n        \"number\": 47100000873,\n        \"created\": \"2020-05-22T10:33:55.4669608Z\",\n        \"updated\": \"2020-05-22T10:33:55.8734408Z\",\n        \"instrument\": \"CreditAccount\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditaccount/payments/0c2d4589-cee6-4df1-e764-08d7fe3ba10c\",\n            \"rel\": \"update-payment-abort\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditaccount/payments/authorize/84fd6b87d21cef7abd8f32cc5edce9806660c0ec763dad67ad4f41f650b771bf\",\n            \"rel\": \"redirect-authorization\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditaccount/core/scripts/client/px.creditaccount.client.js?token=84fd6b87d21cef7abd8f32cc5edce9806660c0ec763dad67ad4f41f650b771bf&operation=authorize\",\n            \"rel\": \"view-authorization\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Capture payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcapturePayment}}",
							"host": [
								"{{operationcapturePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Capture payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590144729\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
										"captures"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures/f3390557-a735-4fc1-909e-08d7fe3e0ab1"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:52:10 GMT"
								},
								{
									"key": "Content-Length",
									"value": "664"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"capture\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures/f3390557-a735-4fc1-909e-08d7fe3e0ab1\",\n        \"transaction\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/f3390557-a735-4fc1-909e-08d7fe3e0ab1\",\n            \"created\": \"2020-05-22T10:52:09.9959603Z\",\n            \"updated\": \"2020-05-22T10:52:10.3758193Z\",\n            \"type\": \"Capture\",\n            \"state\": \"Completed\",\n            \"number\": 47100000877,\n            \"amount\": 1001,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590144729\",\n            \"isOperational\": false,\n            \"reconciliationNumber\": 737566,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590144848\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "664"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/reversals/e76ef155-c9c3-4a40-909f-08d7fe3e0ab1"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:54:09 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"reversal\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/reversals/e76ef155-c9c3-4a40-909f-08d7fe3e0ab1\",\n        \"transaction\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/e76ef155-c9c3-4a40-909f-08d7fe3e0ab1\",\n            \"created\": \"2020-05-22T10:54:09.4955705Z\",\n            \"updated\": \"2020-05-22T10:54:09.9142155Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"Completed\",\n            \"number\": 47100000878,\n            \"amount\": 1,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590144848\",\n            \"isOperational\": false,\n            \"reconciliationNumber\": 737566,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Cancel payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcancelPayment}}",
							"host": [
								"{{operationcancelPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Cancel payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590144900\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "649"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/cancellations/a52273cc-55f1-4655-90a0-08d7fe3e0ab1"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:55:00 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"cancellation\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/cancellations/a52273cc-55f1-4655-90a0-08d7fe3e0ab1\",\n        \"transaction\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/a52273cc-55f1-4655-90a0-08d7fe3e0ab1\",\n            \"created\": \"2020-05-22T10:55:00.9439595Z\",\n            \"updated\": \"2020-05-22T10:55:01.2769449Z\",\n            \"type\": \"Cancellation\",\n            \"state\": \"Completed\",\n            \"number\": 47100000879,\n            \"amount\": 8999,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590144900\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Get payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "1879"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:51:22 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"approvedLegalAddress\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/approvedlegaladdress\"\n        },\n        \"maskedApprovedLegalAddress\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/maskedapprovedlegaladdress\"\n        },\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n        \"number\": 47100000874,\n        \"created\": \"2020-05-22T10:50:56.3439141Z\",\n        \"updated\": \"2020-05-22T10:51:14.2386098Z\",\n        \"instrument\": \"CreditAccount\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/prices\"\n        },\n        \"amount\": 10000,\n        \"remainingCaptureAmount\": 10000,\n        \"remainingCancellationAmount\": 10000,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions\"\n        },\n        \"authorizations\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/authorizations\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/cancellations\",\n            \"rel\": \"create-cancellation\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures\",\n            \"rel\": \"create-capture\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/paid\",\n            \"rel\": \"paid-payment\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get authorization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/authorizations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"authorizations"
							]
						}
					},
					"response": [
						{
							"name": "Get authorization",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
										"authorizations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:53:32 GMT"
								},
								{
									"key": "Content-Length",
									"value": "765"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"authorizations\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/authorizations\",\n        \"authorizationList\": [\n            {\n                \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/authorizations/29a24359-f5d9-4ec7-909d-08d7fe3e0ab1\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/29a24359-f5d9-4ec7-909d-08d7fe3e0ab1\",\n                    \"created\": \"2020-05-22T10:51:11.4814085Z\",\n                    \"updated\": \"2020-05-22T10:51:14.2386155Z\",\n                    \"type\": \"Authorization\",\n                    \"state\": \"Completed\",\n                    \"number\": 47100000876,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1590144654\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get captures",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/captures",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"captures"
							]
						}
					},
					"response": [
						{
							"name": "Get captures",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
										"captures"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:53:45 GMT"
								},
								{
									"key": "Content-Length",
									"value": "764"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"captures\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures\",\n        \"captureList\": [\n            {\n                \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/captures/f3390557-a735-4fc1-909e-08d7fe3e0ab1\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/f3390557-a735-4fc1-909e-08d7fe3e0ab1\",\n                    \"created\": \"2020-05-22T10:52:09.9959603Z\",\n                    \"updated\": \"2020-05-22T10:52:10.3758193Z\",\n                    \"type\": \"Capture\",\n                    \"state\": \"Completed\",\n                    \"number\": 47100000877,\n                    \"amount\": 1001,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590144729\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737566,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:54:36 GMT"
								},
								{
									"key": "Content-Length",
									"value": "766"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"reversals\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/reversals/e76ef155-c9c3-4a40-909f-08d7fe3e0ab1\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/e76ef155-c9c3-4a40-909f-08d7fe3e0ab1\",\n                    \"created\": \"2020-05-22T10:54:09.4955705Z\",\n                    \"updated\": \"2020-05-22T10:54:09.9142155Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 47100000878,\n                    \"amount\": 1,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590144848\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737566,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get cancellations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/cancellations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"cancellations"
							]
						}
					},
					"response": [
						{
							"name": "Get cancellations",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"447b0cbb-a0cb-49e3-64ee-08d7fe3b6566",
										"cancellations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:55:33 GMT"
								},
								{
									"key": "Content-Length",
									"value": "759"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566\",\n    \"cancellations\": {\n        \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/cancellations\",\n        \"cancellationList\": [\n            {\n                \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/cancellations/a52273cc-55f1-4655-90a0-08d7fe3e0ab1\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditaccount/payments/447b0cbb-a0cb-49e3-64ee-08d7fe3b6566/transactions/a52273cc-55f1-4655-90a0-08d7fe3e0ab1\",\n                    \"created\": \"2020-05-22T10:55:00.9439595Z\",\n                    \"updated\": \"2020-05-22T10:55:01.2769449Z\",\n                    \"type\": \"Cancellation\",\n                    \"state\": \"Completed\",\n                    \"number\": 47100000879,\n                    \"amount\": 8999,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590144900\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditaccount",
										"payments",
										"0d9cceb6-3b53-4642-e765-08d7fe3ba10c"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 10:56:15 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1020"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c\",\n        \"number\": 47100000880,\n        \"created\": \"2020-05-22T10:56:13.5208052Z\",\n        \"updated\": \"2020-05-22T10:56:15.4170231Z\",\n        \"instrument\": \"CreditAccount\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Aborted\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditaccount/payments/0d9cceb6-3b53-4642-e765-08d7fe3ba10c/aborted\",\n            \"rel\": \"aborted-payment\"\n        }\n    ]\n}"
						}
					]
				}
			]
		},
		{
			"name": "Card",
			"item": [
				{
					"name": "create payments",
					"item": [
						{
							"name": "regular payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"CreditCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{$timestamp}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"creditCard\": {}\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/creditcard/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"creditcard",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "Create Payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"CreditCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"my description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference{{$timestamp}}\",\n            \"payeeName\": \"test merchant\"\n        }\n    },\n    \"creditCard\": {}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"creditcard",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": null,
									"cookie": [],
									"body": "{\r\n    \"payment\": {\r\n        \"id\": \"/psp/creditcard/payments/9464c3b2-6b2f-4b9e-d17a-08d7f7288268\",\r\n        \"number\": 40101602179,\r\n        \"created\": \"2020-05-13T12:13:56.5849776Z\",\r\n        \"updated\": \"2020-05-13T12:13:57.3064138Z\",\r\n        \"instrument\": \"CreditCard\",\r\n        \"operation\": \"Purchase\",\r\n        \"intent\": \"Authorization\",\r\n        \"state\": \"Ready\",\r\n        \"currency\": \"SEK\",\r\n        \"prices\": {\r\n            \"id\": \"/psp/creditcard/payments/9464c3b2-6b2f-4b9e-d17a-08d7f7288268/prices\"\r\n        },\r\n        \"amount\": 0,\r\n        \"description\": \"test description\",\r\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\r\n        \"userAgent\": \"Mozilla/5.0 Postman\",\r\n        \"language\": \"sv-SE\",\r\n        \"urls\": {\r\n            \"id\": \"/psp/creditcard/payments/9464c3b2-6b2f-4b9e-d17a-08d7f7288268/urls\"\r\n        },\r\n        \"payeeInfo\": {\r\n            \"id\": \"/psp/creditcard/payments/9464c3b2-6b2f-4b9e-d17a-08d7f7288268/payeeinfo\"\r\n        },\r\n        \"metadata\": {\r\n            \"id\": \"/psp/creditcard/payments/9464c3b2-6b2f-4b9e-d17a-08d7f7288268/metadata\"\r\n        }\r\n    },\r\n    \"operations\": [\r\n        {\r\n            \"method\": \"PATCH\",\r\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/9464c3b2-6b2f-4b9e-d17a-08d7f7288268\",\r\n            \"rel\": \"update-payment-abort\",\r\n            \"contentType\": \"application/json\"\r\n        },\r\n        {\r\n            \"method\": \"GET\",\r\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=8d7e74e1f4fca67a661b6874c6ca295a62eccf8902de7d8003b4de3dc48b80d2&operation=authorize\",\r\n            \"rel\": \"view-authorization\",\r\n            \"contentType\": \"application/javascript\"\r\n        },\r\n        {\r\n            \"method\": \"GET\",\r\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/payments/authorize/8d7e74e1f4fca67a661b6874c6ca295a62eccf8902de7d8003b4de3dc48b80d2\",\r\n            \"rel\": \"redirect-authorization\",\r\n            \"contentType\": \"text/html\"\r\n        },\r\n        {\r\n            \"method\": \"GET\",\r\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=8d7e74e1f4fca67a661b6874c6ca295a62eccf8902de7d8003b4de3dc48b80d2\",\r\n            \"rel\": \"view-payment\",\r\n            \"contentType\": \"application/javascript\"\r\n        }\r\n    ]\r\n}"
								}
							]
						},
						{
							"name": "generate payment token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"CreditCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"generatePaymentToken\": true,\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"creditCard\": {}\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/creditcard/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"creditcard",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "Create Payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"CreditCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"my description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"generatePaymentToken\": true,\n        \"urls\": {\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference{{$timestamp}}\",\n            \"payeeName\": \"test merchant\"\n        }\n    },\n    \"creditCard\": {}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"creditcard",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": null,
									"cookie": [],
									"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditcard/payments/34c17e4a-1c88-4e02-d17b-08d7f7288268\",\n        \"number\": 40101602182,\n        \"created\": \"2020-05-13T12:14:37.395923Z\",\n        \"updated\": \"2020-05-13T12:14:38.0621966Z\",\n        \"instrument\": \"CreditCard\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditcard/payments/34c17e4a-1c88-4e02-d17b-08d7f7288268/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/creditcard/payments/34c17e4a-1c88-4e02-d17b-08d7f7288268/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditcard/payments/34c17e4a-1c88-4e02-d17b-08d7f7288268/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditcard/payments/34c17e4a-1c88-4e02-d17b-08d7f7288268/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/34c17e4a-1c88-4e02-d17b-08d7f7288268\",\n            \"rel\": \"update-payment-abort\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=2e5289b1b465fa4cdd310c8d388c7081334bee437c3b22fb7e05a98ebd29e816&operation=authorize\",\n            \"rel\": \"view-authorization\",\n            \"contentType\": \"application/javascript\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/payments/authorize/2e5289b1b465fa4cdd310c8d388c7081334bee437c3b22fb7e05a98ebd29e816\",\n            \"rel\": \"redirect-authorization\",\n            \"contentType\": \"text/html\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=2e5289b1b465fa4cdd310c8d388c7081334bee437c3b22fb7e05a98ebd29e816\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
								}
							]
						},
						{
							"name": "generate recurrence token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"CreditCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"generateRecurrenceToken\": true,\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"creditCard\": {}\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/creditcard/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"creditcard",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "Create Payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"CreditCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"my description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"generateRecurrenceToken\": true,\n        \"urls\": {\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference{{$timestamp}}\",\n            \"payeeName\": \"test merchant\"\n        }\n    },\n    \"creditCard\": {}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"creditcard",
												"payments"
											]
										}
									},
									"_postman_previewlanguage": "json",
									"header": null,
									"cookie": [],
									"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditcard/payments/9b2acf0e-c7bd-419a-d17d-08d7f7288268\",\n        \"number\": 40101602185,\n        \"created\": \"2020-05-13T12:14:59.2690267Z\",\n        \"updated\": \"2020-05-13T12:14:59.9211515Z\",\n        \"instrument\": \"CreditCard\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditcard/payments/9b2acf0e-c7bd-419a-d17d-08d7f7288268/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/creditcard/payments/9b2acf0e-c7bd-419a-d17d-08d7f7288268/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditcard/payments/9b2acf0e-c7bd-419a-d17d-08d7f7288268/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditcard/payments/9b2acf0e-c7bd-419a-d17d-08d7f7288268/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/9b2acf0e-c7bd-419a-d17d-08d7f7288268\",\n            \"rel\": \"update-payment-abort\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=2d6297fe7401f4167ff96c63076acb67fc27986491198be4fbe376e2371a1efc&operation=authorize\",\n            \"rel\": \"view-authorization\",\n            \"contentType\": \"application/javascript\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/payments/authorize/2d6297fe7401f4167ff96c63076acb67fc27986491198be4fbe376e2371a1efc\",\n            \"rel\": \"redirect-authorization\",\n            \"contentType\": \"text/html\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=2d6297fe7401f4167ff96c63076acb67fc27986491198be4fbe376e2371a1efc\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
								}
							]
						},
						{
							"name": "verify payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Verify\",\n        \"currency\": \"{{currency}}\",\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"creditCard\": {}\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/creditcard/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"creditcard",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "Create Payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Verify\",\n        \"currency\": \"SEK\",\n        \"description\": \"my description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference{{$timestamp}}\",\n            \"payeeName\": \"test merchant\"\n        }\n    },\n    \"creditCard\": {}\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"creditcard",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": null,
									"cookie": [],
									"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditcard/payments/7dc64dce-ea01-47b6-b2f3-08d7f727ce7b\",\n        \"number\": 40101602188,\n        \"created\": \"2020-05-13T12:15:16.0414739Z\",\n        \"updated\": \"2020-05-13T12:15:16.4661333Z\",\n        \"instrument\": \"CreditCard\",\n        \"operation\": \"Verify\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/creditcard/payments/7dc64dce-ea01-47b6-b2f3-08d7f727ce7b/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditcard/payments/7dc64dce-ea01-47b6-b2f3-08d7f727ce7b/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditcard/payments/7dc64dce-ea01-47b6-b2f3-08d7f727ce7b/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/7dc64dce-ea01-47b6-b2f3-08d7f727ce7b\",\n            \"rel\": \"update-payment-abort\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=9d6a173e49c50ba1bef8a6f0557602ddbc8e21b96ec57ec0def5453e8a15865f&operation=verify\",\n            \"rel\": \"view-verification\",\n            \"contentType\": \"application/javascript\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/payments/verify/9d6a173e49c50ba1bef8a6f0557602ddbc8e21b96ec57ec0def5453e8a15865f\",\n            \"rel\": \"redirect-verification\",\n            \"contentType\": \"text/html\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=9d6a173e49c50ba1bef8a6f0557602ddbc8e21b96ec57ec0def5453e8a15865f\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
								}
							]
						},
						{
							"name": "recur payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Recur\",\n        \"intent\": \"Authorization\",\n        \"recurrenceToken\": \"{{recurrenceToken}}\",\n        \"currency\": \"{{currency}}\",\n        \"amount\": 10000,\n        \"vatAmount\": 0,\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0...\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n            \"callbackUrl\": \"{{callbackUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/creditcard/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"creditcard",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "recur payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"type": "text",
												"value": ""
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Recur\",\n        \"intent\": \"Authorization\",\n        \"recurrenceToken\": \"882bceeb-165c-4675-b19c-3e7b00351a8e\",\n        \"currency\": \"SEK\",\n        \"amount\": 10000,\n        \"vatAmount\": 0,\n        \"description\": \"test description\",\n        \"userAgent\": \"Mozilla/5.0...\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Host\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference{{$timestamp}}\",\n            \"payeeName\": \"test merchant\"\n        }\n    }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"creditcard",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Transfer-Encoding",
											"value": "chunked"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Location",
											"value": "https://api.externalintegration.payex.com/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3"
										},
										{
											"key": "Server",
											"value": "Microsoft-IIS/8.5"
										},
										{
											"key": "X-Powered-By",
											"value": "ASP.NET"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Jun 2020 06:44:09 GMT"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=16070400; includeSubDomains"
										}
									],
									"cookie": [],
									"body": "{\n    \"payment\": {\n        \"recurrenceToken\": \"882bceeb-165c-4675-b19c-3e7b00351a8e\",\n        \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3\",\n        \"number\": 40101740653,\n        \"created\": \"2020-06-04T06:44:09.1787159Z\",\n        \"updated\": \"2020-06-04T06:44:09.8094829Z\",\n        \"instrument\": \"CreditCard\",\n        \"operation\": \"Recur\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/prices\"\n        },\n        \"amount\": 10000,\n        \"remainingCaptureAmount\": 10000,\n        \"remainingCancellationAmount\": 10000,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.25.0\",\n        \"userAgent\": \"Mozilla/5.0...\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/transactions\"\n        },\n        \"authorizations\": {\n            \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/authorizations\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/cancellations\",\n            \"rel\": \"create-cancellation\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/captures\",\n            \"rel\": \"create-capture\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/paid\",\n            \"rel\": \"paid-payment\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/42c3bc15-6dba-4769-e2bb-08d807aa56c3/authorizations/6b25c96e-7eb9-46c2-186a-08d807aa57cf\",\n            \"rel\": \"update-authorization-overchargedamount\",\n            \"contentType\": \"application/json\"\n        }\n    ]\n}"
								}
							]
						}
					]
				},
				{
					"name": "Authorize payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const authorization = responseBody.authorization;\r",
									"    const transactionId = authorization.id;\r",
									"    const paymentToken = authorization.paymentToken ? authorization.paymentToken : undefined;\r",
									"    const recurrenceToken = authorization.recurrenceToken ? authorization.recurrenceToken : undefined;\r",
									"    if (paymentToken)\r",
									"        pm.environment.set(\"paymentToken\", paymentToken);\r",
									"    if (recurrenceToken)\r",
									"        pm.environment.set(\"recurrenceToken\", recurrenceToken);\r",
									"\r",
									"    pm.environment.set(\"transactionId\", transactionId);\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "0c117cd927bffa13a8e2655202ffe59f20d090df37879a932f3494f0eb6f02eb",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"cardNumber\": \"{{cardPan}}\",\n        \"cardExpiryMonth\": \"{{cardExpiryMonth}}\",\n        \"cardExpiryYear\": \"{{cardExpiryYear}}\",\n        \"cardVerificationCode\": \"{{cardCvc}}\",\n        \"cardholderName\": \"{{consumerName}}\",\n        \"chosenCoBrand\": \"{{chosenCoBrand}}\",\n    },\n    \n        \"remoteAddress\": \"127.0.0.1\",\n        \"UserAgent\": \"Mozilla/5.0 Postman\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationDirectPayment}}",
							"host": [
								"{{operationDirectPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Authorize payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"cardNumber\": \"4925000000000004\",\n        \"cardExpiryMonth\": \"12\",\n        \"cardExpiryYear\": \"32\",\n        \"cardVerificationCode\": \"123\",\n        \"cardholderName\": \"Azra Oliveira\",\n        \"chosenCoBrand\": \"visa\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/confined/payments/b73fc552-7d78-47e3-b2fa-08d7f727ce7b/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"confined",
										"payments",
										"b73fc552-7d78-47e3-b2fa-08d7f727ce7b",
										"authorizations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": null,
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/b73fc552-7d78-47e3-b2fa-08d7f727ce7b\",\n    \"authorization\": {\n        \"direct\": true,\n        \"cardBrand\": \"Visa\",\n        \"cardType\": \"Credit\",\n        \"maskedPan\": \"492500******0004\",\n        \"expiryDate\": \"12/2022\",\n        \"panToken\": \"eb488c77-8118-4c9f-b3b3-ff134936df64\",\n        \"panEnrolled\": false,\n        \"issuerAuthorizationApprovalCode\": \"L73451\",\n        \"acquirerTransactionType\": \"SSL\",\n        \"acquirerStan\": \"73451\",\n        \"acquirerTerminalId\": \"59\",\n        \"acquirerTransactionTime\": \"2020-05-13T14:18:39Z\",\n        \"nonPaymentToken\": \"ed4683a8-6d2a-4a14-b065-746a41316b8f\",\n        \"id\": \"/psp/creditcard/payments/b73fc552-7d78-47e3-b2fa-08d7f727ce7b/authorizations/e8c1cf1b-ffb4-49ac-adb7-08d7f727d5b2\",\n        \"transaction\": {\n            \"id\": \"/psp/creditcard/payments/b73fc552-7d78-47e3-b2fa-08d7f727ce7b/transactions/e8c1cf1b-ffb4-49ac-adb7-08d7f727d5b2\",\n            \"created\": \"2020-05-13T12:18:37.7506651Z\",\n            \"updated\": \"2020-05-13T12:18:38.9079122Z\",\n            \"type\": \"Authorization\",\n            \"state\": \"Completed\",\n            \"number\": 40101602211,\n            \"amount\": 10000,\n            \"vatAmount\": 0,\n            \"description\": \"test description\",\n            \"payeeReference\": \"someUniqueReference1589372298\",\n            \"isOperational\": false,\n            \"operations\": [\n                {\n                    \"method\": \"PATCH\",\n                    \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/b73fc552-7d78-47e3-b2fa-08d7f727ce7b/authorizations/e8c1cf1b-ffb4-49ac-adb7-08d7f727d5b2\",\n                    \"rel\": \"update-authorization-overchargedamount\"\n                }\n            ]\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Capture payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcapturePayment}}",
							"host": [
								"{{operationcapturePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Capture payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1589372406\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"captures"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures/1ac1460d-d53d-4dfe-adbc-08d7f727d5b2"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:20:09 GMT"
								},
								{
									"key": "Content-Length",
									"value": "625"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"capture\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures/1ac1460d-d53d-4dfe-adbc-08d7f727d5b2\",\n        \"transaction\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/1ac1460d-d53d-4dfe-adbc-08d7f727d5b2\",\n            \"created\": \"2020-05-13T12:20:08.9487719Z\",\n            \"updated\": \"2020-05-13T12:20:09.3645714Z\",\n            \"type\": \"Capture\",\n            \"state\": \"Completed\",\n            \"number\": 40101602224,\n            \"amount\": 1001,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1589372406\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1589372553\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals/046554f0-d65a-48ad-adc0-08d7f727d5b2"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:22:35 GMT"
								},
								{
									"key": "Content-Length",
									"value": "628"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"reversal\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals/046554f0-d65a-48ad-adc0-08d7f727d5b2\",\n        \"transaction\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/046554f0-d65a-48ad-adc0-08d7f727d5b2\",\n            \"created\": \"2020-05-13T12:22:34.9398553Z\",\n            \"updated\": \"2020-05-13T12:22:35.4570425Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"Completed\",\n            \"number\": 40101602233,\n            \"amount\": 1001,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1589372553\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Cancel payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcancelPayment}}",
							"host": [
								"{{operationcancelPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Cancel payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1589372595\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"cancellations"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations/ae7bc7ae-3be4-42c1-1992-08d7f7285952"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:23:18 GMT"
								},
								{
									"key": "Content-Length",
									"value": "640"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"cancellation\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations/ae7bc7ae-3be4-42c1-1992-08d7f7285952\",\n        \"transaction\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/ae7bc7ae-3be4-42c1-1992-08d7f7285952\",\n            \"created\": \"2020-05-13T12:23:17.8910568Z\",\n            \"updated\": \"2020-05-13T12:23:18.5253673Z\",\n            \"type\": \"Cancellation\",\n            \"state\": \"Completed\",\n            \"number\": 40101602237,\n            \"amount\": 8999,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1589372595\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Get payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:20:43 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n        \"number\": 40101602222,\n        \"created\": \"2020-05-13T12:19:49.3309133Z\",\n        \"updated\": \"2020-05-13T12:20:09.364571Z\",\n        \"instrument\": \"CreditCard\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/prices\"\n        },\n        \"amount\": 10000,\n        \"remainingCaptureAmount\": 8999,\n        \"remainingCancellationAmount\": 8999,\n        \"remainingReversalAmount\": 1001,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions\"\n        },\n        \"authorizations\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/authorizations\"\n        },\n        \"captures\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations\",\n            \"rel\": \"create-cancellation\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures\",\n            \"rel\": \"create-capture\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals\",\n            \"rel\": \"create-reversal\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/paid\",\n            \"rel\": \"paid-payment\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/creditcardv2/core/scripts/client/px.creditcard.client.js?token=86c4c7b1e3bd60d08f66182dd8abec4f4591ac4bbe57c2d9c804dcc6aa0e4aa1\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get authorization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if( responseCode >= 200 && responseCode < 300) {\r",
									"    const authorization = responseBody.authorizations;\r",
									"    const transactionId = authorizations.id;\r",
									"\r",
									"    if(authorization.authorizationList.find(authorization => authorization.paymentToken)) {\r",
									"        const paymentToken = authorization.authorizationList.find(authorization => authorization.paymentToken).paymentToken;\r",
									"        pm.environment.set(\"paymentToken\", paymentToken);\r",
									"    }\r",
									"    if(authorization.authorizationList.find(authorization => authorization.recurrenceToken)) {\r",
									"        const recurrenceToken = authorization.authorizationList.find(authorization => authorization.recurrenceToken).recurrenceToken;\r",
									"        pm.environment.set(\"recurrenceToken\", recurrenceToken);\r",
									"    }\r",
									"    pm.environment.set(\"transactionId\", transactionId)\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/authorizations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"authorizations"
							]
						}
					},
					"response": [
						{
							"name": "Get authorization",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"authorizations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:21:20 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"authorizations\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/authorizations\",\n        \"authorizationList\": [\n            {\n                \"direct\": true,\n                \"cardBrand\": \"Visa\",\n                \"cardType\": \"Credit\",\n                \"maskedPan\": \"492500******0004\",\n                \"expiryDate\": \"12/2022\",\n                \"panToken\": \"eb488c77-8118-4c9f-b3b3-ff134936df64\",\n                \"panEnrolled\": false,\n                \"issuerAuthorizationApprovalCode\": \"L66322\",\n                \"acquirerTransactionType\": \"SSL\",\n                \"acquirerStan\": \"66322\",\n                \"acquirerTerminalId\": \"52\",\n                \"acquirerTransactionTime\": \"2020-05-13T14:19:53Z\",\n                \"nonPaymentToken\": \"ed4683a8-6d2a-4a14-b065-746a41316b8f\",\n                \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/authorizations/cd1ba50c-a730-41f6-198d-08d7f7285952\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/cd1ba50c-a730-41f6-198d-08d7f7285952\",\n                    \"created\": \"2020-05-13T12:19:51.6712807Z\",\n                    \"updated\": \"2020-05-13T12:19:52.8884177Z\",\n                    \"type\": \"Authorization\",\n                    \"state\": \"Completed\",\n                    \"number\": 40101602223,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1589372387\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get captures",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/captures",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"captures"
							]
						}
					},
					"response": [
						{
							"name": "Get captures",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"captures"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:21:46 GMT"
								},
								{
									"key": "Content-Length",
									"value": "722"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"captures\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures\",\n        \"captureList\": [\n            {\n                \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/captures/1ac1460d-d53d-4dfe-adbc-08d7f727d5b2\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/1ac1460d-d53d-4dfe-adbc-08d7f727d5b2\",\n                    \"created\": \"2020-05-13T12:20:08.9487719Z\",\n                    \"updated\": \"2020-05-13T12:20:09.3645714Z\",\n                    \"type\": \"Capture\",\n                    \"state\": \"Completed\",\n                    \"number\": 40101602224,\n                    \"amount\": 1001,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1589372406\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:23:00 GMT"
								},
								{
									"key": "Content-Length",
									"value": "727"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"reversals\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/reversals/046554f0-d65a-48ad-adc0-08d7f727d5b2\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/046554f0-d65a-48ad-adc0-08d7f727d5b2\",\n                    \"created\": \"2020-05-13T12:22:34.9398553Z\",\n                    \"updated\": \"2020-05-13T12:22:35.4570425Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 40101602233,\n                    \"amount\": 1001,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1589372553\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get cancellations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/cancellations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"cancellations"
							]
						}
					},
					"response": [
						{
							"name": "Get cancellations",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"cancellations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:23:42 GMT"
								},
								{
									"key": "Content-Length",
									"value": "747"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"cancellations\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations\",\n        \"cancellationList\": [\n            {\n                \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations/ae7bc7ae-3be4-42c1-1992-08d7f7285952\",\n                \"transaction\": {\n                    \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/ae7bc7ae-3be4-42c1-1992-08d7f7285952\",\n                    \"created\": \"2020-05-13T12:23:17.8910568Z\",\n                    \"updated\": \"2020-05-13T12:23:18.5253673Z\",\n                    \"type\": \"Cancellation\",\n                    \"state\": \"Completed\",\n                    \"number\": 40101602237,\n                    \"amount\": 8999,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1589372595\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"6bd9449b-da7b-49a2-b307-08d7f727ce7b"
									]
								}
							},
							"_postman_previewlanguage": "json",
							"header": null,
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b\",\n        \"number\": 40101602273,\n        \"created\": \"2020-05-13T12:25:23.1090864Z\",\n        \"updated\": \"2020-05-13T12:25:25.1258337Z\",\n        \"instrument\": \"CreditCard\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Aborted\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/creditcard/payments/6bd9449b-da7b-49a2-b307-08d7f727ce7b/aborted\",\n            \"rel\": \"aborted-payment\",\n            \"contentType\": \"application/json\"\n        }\n    ]\n}"
						}
					]
				}
			]
		},
		{
			"name": "Invoice",
			"item": [
				{
					"name": "Create payments",
					"item": [
						{
							"name": "regular payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"Invoice\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"invoice\": {\n    \t\"invoiceType\": \"PayExFinancing{{countryType}}\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/invoice/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"invoice",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "create payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Invoice\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"cdff105b-1879-4d10-a83b-7bd7115cffef\",\n            \"payeeReference\": \"someUniqueReference123894723\",\n            \"payeeName\": \"Test merchant\"\n        }\n    },\n    \"invoice\": {\n    \t\"invoiceType\": \"PayExFinancingSe\"\n    }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/invoice/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"invoice",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Location",
											"value": "https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9"
										},
										{
											"key": "Server",
											"value": "Microsoft-IIS/8.5"
										},
										{
											"key": "X-Powered-By",
											"value": "ASP.NET"
										},
										{
											"key": "Date",
											"value": "Fri, 22 May 2020 08:45:41 GMT"
										},
										{
											"key": "Content-Length",
											"value": "1907"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=16070400; includeSubDomains"
										}
									],
									"cookie": [],
									"body": "{\n    \"payment\": {\n        \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9\",\n        \"number\": 41100171179,\n        \"created\": \"2020-05-22T08:45:42.8097921Z\",\n        \"updated\": \"2020-05-22T08:45:42.5986248Z\",\n        \"instrument\": \"Invoice\",\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/approvedlegaladdress\",\n            \"rel\": \"create-approved-legal-address\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/authorizations\",\n            \"rel\": \"create-authorization\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9\",\n            \"rel\": \"update-payment-abort\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/invoice/payments/authorize/94458274928fdcc90994f9b81849e78051f5a6c29329e3b933184812cf23e7f3\",\n            \"rel\": \"redirect-authorization\",\n            \"contentType\": \"text/html\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/invoice/core/scripts/client/px.invoice.client.js?token=94458274928fdcc90994f9b81849e78051f5a6c29329e3b933184812cf23e7f3&operation=authorize\",\n            \"rel\": \"view-authorization\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
								}
							]
						},
						{
							"name": "Generate recurrence token",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"Invoice\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"generateRecurrenceToken\": true,\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"invoice\": {\n    \t\"invoiceType\": \"PayExFinancing{{countryType}}\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/invoice/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"invoice",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "create payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Invoice\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"generateRecurrenceToken\": true,\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"cdff105b-1879-4d10-a83b-7bd7115cffef\",\n            \"payeeReference\": \"someUniqueReference123894723\",\n            \"payeeName\": \"Test merchant\"\n        }\n    },\n    \"invoice\": {\n    \t\"invoiceType\": \"PayExFinancingSe\"\n    }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/invoice/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"invoice",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Location",
											"value": "https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9"
										},
										{
											"key": "Server",
											"value": "Microsoft-IIS/8.5"
										},
										{
											"key": "X-Powered-By",
											"value": "ASP.NET"
										},
										{
											"key": "Date",
											"value": "Fri, 22 May 2020 08:45:41 GMT"
										},
										{
											"key": "Content-Length",
											"value": "1907"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=16070400; includeSubDomains"
										}
									],
									"cookie": [],
									"body": "{\n    \"payment\": {\n        \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9\",\n        \"number\": 41100171179,\n        \"created\": \"2020-05-22T08:45:42.8097921Z\",\n        \"updated\": \"2020-05-22T08:45:42.5986248Z\",\n        \"instrument\": \"Invoice\",\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/approvedlegaladdress\",\n            \"rel\": \"create-approved-legal-address\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9/authorizations\",\n            \"rel\": \"create-authorization\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9\",\n            \"rel\": \"update-payment-abort\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/invoice/payments/authorize/94458274928fdcc90994f9b81849e78051f5a6c29329e3b933184812cf23e7f3\",\n            \"rel\": \"redirect-authorization\",\n            \"contentType\": \"text/html\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/invoice/core/scripts/client/px.invoice.client.js?token=94458274928fdcc90994f9b81849e78051f5a6c29329e3b933184812cf23e7f3&operation=authorize\",\n            \"rel\": \"view-authorization\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
								}
							]
						},
						{
							"name": "Create verification",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Verify\",\n        \"currency\": \"{{currency}}\",\n        \"prices\": [\n            {\n                \"type\": \"Invoice\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"invoice\": {\n    \t\"invoiceType\": \"PayExFinancing{{countryType}}\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/invoice/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"invoice",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "create payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Verify\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Invoice\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"cdff105b-1879-4d10-a83b-7bd7115cffef\",\n            \"payeeReference\": \"someUniqueReference123894723\",\n            \"payeeName\": \"Test merchant\"\n        }\n    },\n    \"invoice\": {\n    \t\"invoiceType\": \"PayExFinancingSe\"\n    }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/invoice/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"invoice",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Location",
											"value": "https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9"
										},
										{
											"key": "Server",
											"value": "Microsoft-IIS/8.5"
										},
										{
											"key": "X-Powered-By",
											"value": "ASP.NET"
										},
										{
											"key": "Date",
											"value": "Fri, 22 May 2020 08:45:41 GMT"
										},
										{
											"key": "Content-Length",
											"value": "1907"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=16070400; includeSubDomains"
										}
									],
									"cookie": [],
									"body": "{\r\n    \"payment\": {\r\n        \"id\": \"/psp/invoice/payments/7f574511-49ea-4d57-7f95-08d7fcb653b9\",\r\n        \"number\": 41100171224,\r\n        \"created\": \"2020-05-22T10:17:24.5398619Z\",\r\n        \"updated\": \"2020-05-22T10:17:24.3286351Z\",\r\n        \"instrument\": \"Invoice\",\r\n        \"operation\": \"Verify\",\r\n        \"state\": \"Ready\",\r\n        \"currency\": \"NOK\",\r\n        \"amount\": 0,\r\n        \"description\": \"test description\",\r\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\r\n        \"userAgent\": \"Mozilla/5.0 Postman\",\r\n        \"language\": \"nb-NO\",\r\n        \"urls\": {\r\n            \"id\": \"/psp/invoice/payments/7f574511-49ea-4d57-7f95-08d7fcb653b9/urls\"\r\n        },\r\n        \"payeeInfo\": {\r\n            \"id\": \"/psp/invoice/payments/7f574511-49ea-4d57-7f95-08d7fcb653b9/payeeinfo\"\r\n        },\r\n        \"metadata\": {\r\n            \"id\": \"/psp/invoice/payments/7f574511-49ea-4d57-7f95-08d7fcb653b9/metadata\"\r\n        }\r\n    },\r\n    \"operations\": [\r\n        {\r\n            \"method\": \"PATCH\",\r\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/7f574511-49ea-4d57-7f95-08d7fcb653b9\",\r\n            \"rel\": \"update-payment-abort\",\r\n            \"contentType\": \"application/json\"\r\n        },\r\n        {\r\n            \"method\": \"POST\",\r\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/7f574511-49ea-4d57-7f95-08d7fcb653b9/verifications\",\r\n            \"rel\": \"create-verification\",\r\n            \"contentType\": \"application/json\"\r\n        },\r\n        {\r\n            \"method\": \"GET\",\r\n            \"href\": \"https://ecom.externalintegration.payex.com/invoice/payments/verify/371bf59399d5810dc985b64adfff58579d2d6e92276deba2f045d716c7c469bf\",\r\n            \"rel\": \"redirect-verification\",\r\n            \"contentType\": \"text/html\"\r\n        },\r\n        {\r\n            \"method\": \"GET\",\r\n            \"href\": \"https://ecom.externalintegration.payex.com/invoice/core/scripts/client/px.invoice.client.js?token=371bf59399d5810dc985b64adfff58579d2d6e92276deba2f045d716c7c469bf&operation=verify\",\r\n            \"rel\": \"view-verification\",\r\n            \"contentType\": \"application/javascript\"\r\n        }\r\n    ]\r\n}"
								}
							]
						},
						{
							"name": "Recur payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"responseCode = pm.response.code;\r",
											"responseBody = pm.response.json();\r",
											"\r",
											"if (responseCode >= 200 && responseCode < 300) {\r",
											"    // Finding the values to set to globals\r",
											"    const paymentId = responseBody.payment.id;\r",
											"    pm.environment.set(\"paymentId\", paymentId);\r",
											"    const operations = responseBody.operations;\r",
											"    const listOfOperations = utils.sortOperations(operations);\r",
											"    listOfOperations.forEach(item => {\r",
											"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
											"    });\r",
											"    const html = utils.getVisualizerHTML();\r",
											"    const visualizerData = {\r",
											"        paymentId,\r",
											"        operations\r",
											"    }\r",
											"    pm.visualizer.set(html, {\r",
											"        response: visualizerData\r",
											"    });\r",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{merchantToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Recur\",\n        \"intent\": \"Authorization\",\n        \"recurrenceToken\": \"{{recurrenceToken}}\",\n        \"currency\": \"{{currency}}\",\n        \"amount\": 1500,\n        \"vatAmount\": 0,\n        \"description\": \"{{description}}\",\n        \"userAgent\": \"Mozilla/5.0...\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n            \"hostUrls\": [\n                \"{{hostUrl}}\"\n            ],\n            \"callbackUrl\": \"{{callbackUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/psp/invoice/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"psp",
										"invoice",
										"payments"
									]
								}
							},
							"response": [
								{
									"name": "create payment",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"payment\": {\n        \"operation\": \"Recur\",\n        \"intent\": \"Authorization\",\n        \"recurrenceToken\": \"6a44658c-ee97-44b8-9f59-c6bf5afb5f77\",\n        \"currency\": \"SEK\",\n        \"amount\": 1500,\n        \"vatAmount\": 0,\n        \"description\": \"test description\",\n        \"userAgent\": \"Mozilla/5.0...\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"hostUrls\": [\n                \"https://en.wikipedia.org/wiki/Host\"\n            ],\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"cdff105b-1879-4d10-a83b-7bd7115cffef\",\n            \"payeeReference\": \"someUniqueReference123894723\",\n            \"payeeName\": \"Test merchant\"\n        }\n    }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api.externalintegration.payex.com/psp/invoice/payments",
											"protocol": "https",
											"host": [
												"api",
												"externalintegration",
												"payex",
												"com"
											],
											"path": [
												"psp",
												"invoice",
												"payments"
											]
										}
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Location",
											"value": "https://api.externalintegration.payex.com/psp/invoice/payments/9ecebbe2-cbfe-442b-7f8b-08d7fcb653b9"
										},
										{
											"key": "Server",
											"value": "Microsoft-IIS/8.5"
										},
										{
											"key": "X-Powered-By",
											"value": "ASP.NET"
										},
										{
											"key": "Date",
											"value": "Fri, 22 May 2020 08:45:41 GMT"
										},
										{
											"key": "Content-Length",
											"value": "1907"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=16070400; includeSubDomains"
										}
									],
									"cookie": [],
									"body": "{\r\n    \"payment\": {\r\n        \"recurrenceToken\": \"6a44658c-ee97-44b8-9f59-c6bf5afb5f77\",\r\n        \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68\",\r\n        \"number\": 99110249703,\r\n        \"created\": \"2020-05-22T10:27:19.4221524Z\",\r\n        \"updated\": \"2020-05-22T10:27:19.7741451Z\",\r\n        \"instrument\": \"Invoice\",\r\n        \"operation\": \"Recur\",\r\n        \"intent\": \"Authorization\",\r\n        \"state\": \"Ready\",\r\n        \"currency\": \"SEK\",\r\n        \"prices\": {\r\n            \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/prices\"\r\n        },\r\n        \"amount\": 1500,\r\n        \"remainingCaptureAmount\": 1500,\r\n        \"remainingCancellationAmount\": 1500,\r\n        \"description\": \"test description\",\r\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\r\n        \"userAgent\": \"Mozilla/5.0...\",\r\n        \"language\": \"sv-SE\",\r\n        \"transactions\": {\r\n            \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/transactions\"\r\n        },\r\n        \"authorizations\": {\r\n            \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/authorizations\"\r\n        },\r\n        \"urls\": {\r\n            \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/urls\"\r\n        },\r\n        \"payeeInfo\": {\r\n            \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/payeeinfo\"\r\n        },\r\n        \"metadata\": {\r\n            \"id\": \"/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/metadata\"\r\n        }\r\n    },\r\n    \"operations\": [\r\n        {\r\n            \"method\": \"POST\",\r\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/cancellations\",\r\n            \"rel\": \"create-cancellation\",\r\n            \"contentType\": \"application/json\"\r\n        },\r\n        {\r\n            \"method\": \"POST\",\r\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/captures\",\r\n            \"rel\": \"create-capture\",\r\n            \"contentType\": \"application/json\"\r\n        },\r\n        {\r\n            \"method\": \"GET\",\r\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/00fe2984-2016-4ed5-378e-08d7fe23df68/paid\",\r\n            \"rel\": \"paid-payment\",\r\n            \"contentType\": \"application/json\"\r\n        }\r\n    ]\r\n}"
								}
							]
						}
					]
				},
				{
					"name": "Approve legal address",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    const approvedLegalAddress = responseBody.approvedLegalAddress;\r",
									"    const consumerAddress = approvedLegalAddress.streetAddress;\r",
									"    const consumerZipCode = approvedLegalAddress.zipCode;\r",
									"    const consumerCity = approvedLegalAddress.city;\r",
									"\r",
									"    pm.environment.set(\"consumerAddress\", consumerAddress);\r",
									"    pm.environment.set(\"consumerZipCode\", consumerZipCode);\r",
									"    pm.environment.set(\"consumerCity\", consumerCity);\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"addressee\": {\n        \"socialSecurityNumber\": \"{{consumerSSN}}\",\n        \"zipCode\": \"{{consumerZipCode}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationApproveLegalAddress}}",
							"host": [
								"{{operationApproveLegalAddress}}"
							]
						}
					},
					"response": [
						{
							"name": "Approve legal address",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"addressee\": {\n        \"socialSecurityNumber\": \"196003071161\",\n        \"zipCode\": \"19792\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/4871cd1b-09ee-41b3-7f8d-08d7fcb653b9/approvedlegaladdress",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"4871cd1b-09ee-41b3-7f8d-08d7fcb653b9",
										"approvedlegaladdress"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/invoice/payments/4871cd1b-09ee-41b3-7f8d-08d7fcb653b9/approvedlegaladdress"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:54:36 GMT"
								},
								{
									"key": "Content-Length",
									"value": "297"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/4871cd1b-09ee-41b3-7f8d-08d7fcb653b9\",\n    \"approvedLegalAddress\": {\n        \"id\": \"/psp/invoice/payments/4871cd1b-09ee-41b3-7f8d-08d7fcb653b9/approvedlegaladdress\",\n        \"addressee\": \"Azra Oliveira\",\n        \"streetAddress\": \"Helgestavägen 9\",\n        \"zipCode\": \"19792\",\n        \"city\": \"Bro\",\n        \"countryCode\": \"SE\"\n    }\n}"
						}
					]
				},
				{
					"name": "Authorize payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const authorization = responseBody.authorization;\r",
									"    const transactionId = authorization.id;\r",
									"    const recurrenceToken = authorization.recurrenceToken ? authorization.recurrenceToken : undefined;\r",
									"    (recurrenceToken) ? pm.environment.set(\"recurrenceToken\", recurrenceToken) : console.log(\"no recurrence token created\");\r",
									"\r",
									"    pm.environment.set(\"transactionId\", transactionId);\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\"\n    },\n    \"consumer\": {\n        \"socialSecurityNumber\": \"{{consumerSSN}}\",\n        \"customerNumber\": \"123456\",\n        \"email\": \"{{consumerEmail}}\",\n        \"msisdn\": \"{{msisdn}}\",\n        \"ip\": \"127.0.0.1\"\n    },\n    \"legalAddress\": {\n        \"addressee\": \"{{consumerName}}\",\n        \"streetAddress\": \"{{consumerAdress}}\",\n        \"zipCode\": \"{{consumerZipCode}}\",\n        \"city\": \"{{consumerCity}}\",\n        \"countryCode\": \"{{countryCode}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationDirectPayment}}",
							"host": [
								"{{operationDirectPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Authorize payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\"\n    },\n    \"consumer\": {\n        \"socialSecurityNumber\": \"196003071161\",\n        \"customerNumber\": \"123456\",\n        \"email\": \"azra.oliveira@payex.com\",\n        \"msisdn\": \"+46739000001\",\n        \"ip\": \"127.0.0.1\"\n    },\n    \"legalAddress\": {\n        \"addressee\": \"Azra Oliveira\",\n        \"streetAddress\": \"Helgestavägen 9\",\n        \"zipCode\": \"19792\",\n        \"city\": \"Bro\",\n        \"countryCode\": \"SE\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"authorizations"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations/e374c4a4-6073-4f4c-7a57-08d7fcb6e19e"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:27:47 GMT"
								},
								{
									"key": "Content-Length",
									"value": "833"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"authorization\": {\n        \"shippingAddress\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/shippingaddress\"\n        },\n        \"legalAddress\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/legaladdress\"\n        },\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations/e374c4a4-6073-4f4c-7a57-08d7fcb6e19e\",\n        \"transaction\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/e374c4a4-6073-4f4c-7a57-08d7fcb6e19e\",\n            \"created\": \"2020-05-22T09:27:34.7857797Z\",\n            \"updated\": \"2020-05-22T09:27:47.8223235Z\",\n            \"type\": \"Authorization\",\n            \"state\": \"Completed\",\n            \"number\": 41100171206,\n            \"amount\": 10000,\n            \"vatAmount\": 0,\n            \"description\": \"test description\",\n            \"payeeReference\": \"someUniqueReference1590139652\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Capture payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\",\n        \"amount\": 1001,\n        \"vatAmount\": 375,\n        \"payeeReference\": \"{{payeeReference}}\",\n        \"description\": \"description for transaction\",\n        \"itemDescriptions\": [\n            {\n                \"amount\": 1000,\n                \"description\": \"item description 1\"\n            },\n            {\n                \"amount\": 1,\n                \"description\": \"item description 2\"\n            }\n        ],\n        \"vatSummary\": [\n            {\n                \"amount\": 1001,\n                \"vatPercent\": 0,\n                \"vatAmount\": 375\n            }\n        ]\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcapturePayment}}",
							"host": [
								"{{operationcapturePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Capture payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\",\n        \"amount\": 1001,\n        \"vatAmount\": 375,\n        \"payeeReference\": \"someUniqueReference1590140509\",\n        \"description\": \"description for transaction\",\n        \"itemDescriptions\": [\n            {\n                \"amount\": 1000,\n                \"description\": \"item description 1\"\n            },\n            {\n                \"amount\": 1,\n                \"description\": \"item description 2\"\n            }\n        ],\n        \"vatSummary\": [\n            {\n                \"amount\": 1001,\n                \"vatPercent\": 0,\n                \"vatAmount\": 375\n            }\n        ]\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"captures"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures/22956189-30ef-472a-2676-08d7fcb656c0"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:41:49 GMT"
								},
								{
									"key": "Content-Length",
									"value": "813"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"capture\": {\n        \"itemDescriptions\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/22956189-30ef-472a-2676-08d7fcb656c0/itemdescriptions\"\n        },\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures/22956189-30ef-472a-2676-08d7fcb656c0\",\n        \"transaction\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/22956189-30ef-472a-2676-08d7fcb656c0\",\n            \"created\": \"2020-05-22T09:41:50.2906999Z\",\n            \"updated\": \"2020-05-22T09:41:50.6852434Z\",\n            \"type\": \"Capture\",\n            \"state\": \"Completed\",\n            \"number\": 41100171210,\n            \"amount\": 1001,\n            \"vatAmount\": 375,\n            \"description\": \"description for transaction\",\n            \"payeeReference\": \"someUniqueReference1590140509\",\n            \"isOperational\": false,\n            \"reconciliationNumber\": 737566,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\",\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"payeeReference\": \"{{payeeReference}}\",\n        \"description\": \"Reversal of invoice transaction\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\",\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"payeeReference\": \"someUniqueReference1590140649\",\n        \"description\": \"Reversal of invoice transaction\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/reversals/75a7e994-29fb-44df-7a5a-08d7fcb6e19e"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:44:10 GMT"
								},
								{
									"key": "Content-Length",
									"value": "661"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"reversal\": {\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/reversals/75a7e994-29fb-44df-7a5a-08d7fcb6e19e\",\n        \"transaction\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/75a7e994-29fb-44df-7a5a-08d7fcb6e19e\",\n            \"created\": \"2020-05-22T09:44:10.6086241Z\",\n            \"updated\": \"2020-05-22T09:44:11.3103128Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"Completed\",\n            \"number\": 41100171211,\n            \"amount\": 1,\n            \"vatAmount\": 0,\n            \"description\": \"Reversal of invoice transaction\",\n            \"payeeReference\": \"someUniqueReference1590140649\",\n            \"isOperational\": false,\n            \"reconciliationNumber\": 737566,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Cancel payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\",\n        \"payeeReference\": \"{{payeeReference}}\",\n        \"description\": \"test cancellation.\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcancelPayment}}",
							"host": [
								"{{operationcancelPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Cancel payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"activity\": \"FinancingConsumer\",\n        \"payeeReference\": \"{{payeeReference}}\",\n        \"description\": \"test cancellation.\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"creditcard",
										"payments",
										"ff9c526c-b4b4-4906-b2fe-08d7f727ce7b",
										"cancellations"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations/ae7bc7ae-3be4-42c1-1992-08d7f7285952"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Wed, 13 May 2020 12:23:18 GMT"
								},
								{
									"key": "Content-Length",
									"value": "640"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b\",\n    \"cancellation\": {\n        \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/cancellations/ae7bc7ae-3be4-42c1-1992-08d7f7285952\",\n        \"transaction\": {\n            \"id\": \"/psp/creditcard/payments/ff9c526c-b4b4-4906-b2fe-08d7f727ce7b/transactions/ae7bc7ae-3be4-42c1-1992-08d7f7285952\",\n            \"created\": \"2020-05-13T12:23:17.8910568Z\",\n            \"updated\": \"2020-05-13T12:23:18.5253673Z\",\n            \"type\": \"Cancellation\",\n            \"state\": \"Completed\",\n            \"number\": 40101602237,\n            \"amount\": 8999,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1589372595\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Completed payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:39:04 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1647"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n        \"number\": 41100171205,\n        \"created\": \"2020-05-22T09:27:33.3005217Z\",\n        \"updated\": \"2020-05-22T09:27:47.8223231Z\",\n        \"instrument\": \"Invoice\",\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/prices\"\n        },\n        \"amount\": 10000,\n        \"remainingCaptureAmount\": 10000,\n        \"remainingCancellationAmount\": 10000,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions\"\n        },\n        \"authorizations\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/cancellations\",\n            \"rel\": \"create-cancellation\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures\",\n            \"rel\": \"create-capture\",\n            \"contentType\": \"application/json\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/paid\",\n            \"rel\": \"paid-payment\",\n            \"contentType\": \"application/json\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get authorization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if( responseCode >= 200 && responseCode < 300) {\r",
									"    const authorization = responseBody.authorizations;\r",
									"    const transactionId = authorization.id;\r",
									"\r",
									"    if(authorization.authorizationList.find(authorization => authorization.paymentToken)) {\r",
									"        const paymentToken = authorization.authorizationList.find(authorization => authorization.paymentToken).paymentToken;\r",
									"        pm.environment.set(\"paymentToken\", paymentToken);\r",
									"    }\r",
									"    if(authorization.authorizationList.find(authorization => authorization.recurrenceToken)) {\r",
									"        const recurrenceToken = authorization.authorizationList.find(authorization => authorization.recurrenceToken).recurrenceToken;\r",
									"        pm.environment.set(\"recurrenceToken\", recurrenceToken);\r",
									"    }\r",
									"    pm.environment.set(\"transactionId\", transactionId)\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/authorizations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"authorizations"
							]
						}
					},
					"response": [
						{
							"name": "Get authorization",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"authorizations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:42:36 GMT"
								},
								{
									"key": "Content-Length",
									"value": "939"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"authorizations\": {\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations\",\n        \"authorizationList\": [\n            {\n                \"shippingAddress\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/shippingaddress\"\n                },\n                \"legalAddress\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/legaladdress\"\n                },\n                \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/authorizations/e374c4a4-6073-4f4c-7a57-08d7fcb6e19e\",\n                \"transaction\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/e374c4a4-6073-4f4c-7a57-08d7fcb6e19e\",\n                    \"created\": \"2020-05-22T09:27:34.7857797Z\",\n                    \"updated\": \"2020-05-22T09:27:47.8223235Z\",\n                    \"type\": \"Authorization\",\n                    \"state\": \"Completed\",\n                    \"number\": 41100171206,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1590139652\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get captures",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/captures",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"captures"
							]
						}
					},
					"response": [
						{
							"name": "Get captures",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"captures"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:42:34 GMT"
								},
								{
									"key": "Content-Length",
									"value": "907"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"captures\": {\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures\",\n        \"captureList\": [\n            {\n                \"itemDescriptions\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/22956189-30ef-472a-2676-08d7fcb656c0/itemdescriptions\"\n                },\n                \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/captures/22956189-30ef-472a-2676-08d7fcb656c0\",\n                \"transaction\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/22956189-30ef-472a-2676-08d7fcb656c0\",\n                    \"created\": \"2020-05-22T09:41:50.2906999Z\",\n                    \"updated\": \"2020-05-22T09:41:50.6852434Z\",\n                    \"type\": \"Capture\",\n                    \"state\": \"Completed\",\n                    \"number\": 41100171210,\n                    \"amount\": 1001,\n                    \"vatAmount\": 375,\n                    \"description\": \"description for transaction\",\n                    \"payeeReference\": \"someUniqueReference1590140509\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737566,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:45:14 GMT"
								},
								{
									"key": "Content-Length",
									"value": "757"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"reversals\": {\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/reversals/75a7e994-29fb-44df-7a5a-08d7fcb6e19e\",\n                \"transaction\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/75a7e994-29fb-44df-7a5a-08d7fcb6e19e\",\n                    \"created\": \"2020-05-22T09:44:10.6086241Z\",\n                    \"updated\": \"2020-05-22T09:44:11.3103128Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 41100171211,\n                    \"amount\": 1,\n                    \"vatAmount\": 0,\n                    \"description\": \"Reversal of invoice transaction\",\n                    \"payeeReference\": \"someUniqueReference1590140649\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737566,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get cancellations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/cancellations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"cancellations"
							]
						}
					},
					"response": [
						{
							"name": "Get cancellations",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9",
										"cancellations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "737"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:45:43 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9\",\n    \"cancellations\": {\n        \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/cancellations\",\n        \"cancellationList\": [\n            {\n                \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/cancellations/c585279e-15a2-44a4-2677-08d7fcb656c0\",\n                \"transaction\": {\n                    \"id\": \"/psp/invoice/payments/d6dcaf55-3bb1-4e46-7f92-08d7fcb653b9/transactions/c585279e-15a2-44a4-2677-08d7fcb656c0\",\n                    \"created\": \"2020-05-22T09:45:40.3133517Z\",\n                    \"updated\": \"2020-05-22T09:45:40.5058526Z\",\n                    \"type\": \"Cancellation\",\n                    \"state\": \"Completed\",\n                    \"number\": 41100171212,\n                    \"amount\": 8999,\n                    \"vatAmount\": 0,\n                    \"description\": \"test cancellation.\",\n                    \"payeeReference\": \"someUniqueReference1590140739\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"invoice",
										"payments",
										"9742d55e-2bae-45e1-dabd-08d7fcb6e282"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 09:46:59 GMT"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282\",\n        \"number\": 41100171213,\n        \"created\": \"2020-05-22T09:46:55.9057162Z\",\n        \"updated\": \"2020-05-22T09:46:59.2194217Z\",\n        \"instrument\": \"Invoice\",\n        \"operation\": \"FinancingConsumer\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Aborted\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/invoice/payments/9742d55e-2bae-45e1-dabd-08d7fcb6e282/aborted\",\n            \"rel\": \"aborted-payment\",\n            \"contentType\": \"application/json\"\n        }\n    ]\n}"
						}
					]
				}
			]
		},
		{
			"name": "Mobile Pay",
			"item": [
				{
					"name": "create payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const paymentId = responseBody.payment.id;\r",
									"    pm.environment.set(\"paymentId\", paymentId);\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId,\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"DKK\",\n        \"prices\": [\n            {\n                \"type\": \"Visa\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            },\n            {\n                \"type\": \"MasterCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    },\n    \"mobilePay\": {\n    \t\"shoplogoUrl\": \"https://example.com\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/psp/mobilepay/payments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"psp",
								"mobilepay",
								"payments"
							]
						}
					},
					"response": [
						{
							"name": "create payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"DKK\",\n        \"prices\": [\n            {\n                \"type\": \"Visa\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            },\n            {\n                \"type\": \"MasterCard\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference123897\",\n            \"payeeName\": \"test merchant\"\n        }\n    },\n    \"mobilepay\": {\n    \t\"shoplogoUrl\": \"Url for shop logo url\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:07:43 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"prices\": {\n            \"id\": \"/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c/prices\"\n        },\n        \"id\": \"/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c\",\n        \"number\": 45100001723,\n        \"created\": \"2020-05-22T11:07:43.183665Z\",\n        \"updated\": \"2020-05-22T11:07:43.5752473Z\",\n        \"instrument\": \"MobilePay\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"DKK\",\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c/transactions\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c/payeeinfo\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/mobilepay/payments/c9bcaaf8-2053-447d-4d7f-08d7fdb34f0c\",\n            \"rel\": \"update-payment-abort\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/mobilepay/payments/authorize/cfd442ef65eb33125c825a3a9ce5f9273502f738de85ce56f921bfd722d1ee95\",\n            \"rel\": \"redirect-authorization\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Capture payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcapturePayment}}",
							"host": [
								"{{operationcapturePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Capture payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590145929\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
										"captures"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/captures/2e57a1a0-b268-4ea8-9ed1-08d7fcd4200a"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:12:09 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n    \"capture\": {\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/captures/2e57a1a0-b268-4ea8-9ed1-08d7fcd4200a\",\n        \"transaction\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions/2e57a1a0-b268-4ea8-9ed1-08d7fcd4200a\",\n            \"created\": \"2020-05-22T11:12:10.1723394Z\",\n            \"updated\": \"2020-05-22T11:12:10.5074876Z\",\n            \"type\": \"Capture\",\n            \"state\": \"Completed\",\n            \"number\": 45100001729,\n            \"amount\": 1001,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590145929\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590145971\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/reversals/160c8fc8-69a4-44af-9ed2-08d7fcd4200a"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:12:51 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n    \"reversal\": {\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/reversals/160c8fc8-69a4-44af-9ed2-08d7fcd4200a\",\n        \"transaction\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions/160c8fc8-69a4-44af-9ed2-08d7fcd4200a\",\n            \"created\": \"2020-05-22T11:12:52.0591762Z\",\n            \"updated\": \"2020-05-22T11:12:52.4721839Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"Completed\",\n            \"number\": 45100001730,\n            \"amount\": 1,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590145971\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Cancel payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcancelPayment}}",
							"host": [
								"{{operationcancelPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Cancel payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
										"cancellations"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations/772ac0c5-b523-4281-b1c6-08d7fcd43e04"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:13:49 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n    \"cancellation\": {\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations/772ac0c5-b523-4281-b1c6-08d7fcd43e04\",\n        \"transaction\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions/772ac0c5-b523-4281-b1c6-08d7fcd43e04\",\n            \"created\": \"2020-05-22T11:13:49.7285825Z\",\n            \"updated\": \"2020-05-22T11:13:49.9859917Z\",\n            \"type\": \"Cancellation\",\n            \"state\": \"Completed\",\n            \"number\": 45100001731,\n            \"amount\": 8999,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590146029\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Get payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:11:26 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"prices\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/prices\"\n        },\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n        \"number\": 45100001726,\n        \"created\": \"2020-05-22T11:10:57.7554471Z\",\n        \"updated\": \"2020-05-22T11:11:17.4694796Z\",\n        \"instrument\": \"MobilePay\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"DKK\",\n        \"amount\": 10000,\n        \"remainingCaptureAmount\": 10000,\n        \"remainingCancellationAmount\": 10000,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions\"\n        },\n        \"authorizations\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/authorizations\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/payeeinfo\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations\",\n            \"rel\": \"create-cancellation\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/captures\",\n            \"rel\": \"create-capture\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get authorization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/authorizations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"authorizations"
							]
						}
					},
					"response": [
						{
							"name": "Get authorization",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
										"authorizations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:11:54 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n    \"authorizations\": {\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/authorizations\",\n        \"authorizationList\": [\n            {\n                \"maskedPan\": \"492500******0004\",\n                \"expiryDate\": \"12/2022\",\n                \"panToken\": \"eb488c77-8118-4c9f-b3b3-ff134936df64\",\n                \"cardBrand\": \"Visa\",\n                \"cardType\": \"Credit\",\n                \"countryCode\": \"578\",\n                \"paymentToken\": \"d4ff3391-2340-4e61-b342-045c059e1977\",\n                \"issuerAuthorizationApprovalCode\": \"L85592\",\n                \"acquirerTransactionType\": \"MOBILEPAY\",\n                \"acquirerStan\": \"85592\",\n                \"acquirerTerminalId\": \"71\",\n                \"acquirerTransactionTime\": \"2020-05-22T13:11:17Z\",\n                \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/authorizations/9870fdfb-4d3b-4d58-9ed0-08d7fcd4200a\",\n                \"transaction\": {\n                    \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions/9870fdfb-4d3b-4d58-9ed0-08d7fcd4200a\",\n                    \"created\": \"2020-05-22T11:11:16.8736231Z\",\n                    \"updated\": \"2020-05-22T11:11:17.4694796Z\",\n                    \"type\": \"Authorization\",\n                    \"state\": \"Completed\",\n                    \"number\": 45100001728,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1590145857\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get captures",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/captures",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"captures"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:13:14 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n    \"reversals\": {\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/reversals/160c8fc8-69a4-44af-9ed2-08d7fcd4200a\",\n                \"transaction\": {\n                    \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions/160c8fc8-69a4-44af-9ed2-08d7fcd4200a\",\n                    \"created\": \"2020-05-22T11:12:52.0591762Z\",\n                    \"updated\": \"2020-05-22T11:12:52.4721839Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 45100001730,\n                    \"amount\": 1,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590145971\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get cancellations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/cancellations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"cancellations"
							]
						}
					},
					"response": [
						{
							"name": "Get cancellations",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"mobilepay",
										"payments",
										"d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c",
										"cancellations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:14:10 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c\",\n    \"cancellations\": {\n        \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations\",\n        \"cancellationList\": [\n            {\n                \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/cancellations/772ac0c5-b523-4281-b1c6-08d7fcd43e04\",\n                \"transaction\": {\n                    \"id\": \"/psp/mobilepay/payments/d4468d50-dfa2-4a8d-4d80-08d7fdb34f0c/transactions/772ac0c5-b523-4281-b1c6-08d7fcd43e04\",\n                    \"created\": \"2020-05-22T11:13:49.7285825Z\",\n                    \"updated\": \"2020-05-22T11:13:49.9859917Z\",\n                    \"type\": \"Cancellation\",\n                    \"state\": \"Completed\",\n                    \"number\": 45100001731,\n                    \"amount\": 8999,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590146029\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"97c72731-8544-425c-04b2-08d7fcb66e59"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:14:29 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1214"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59\",\n        \"number\": 44100217636,\n        \"created\": \"2020-05-22T11:14:28.0298681Z\",\n        \"updated\": \"2020-05-22T11:14:29.9344668Z\",\n        \"instrument\": \"Swish\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Aborted\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/swish/payments/97c72731-8544-425c-04b2-08d7fcb66e59/aborted\",\n            \"rel\": \"aborted-payment\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/swish/core/scripts/client/px.swish.client.js?token=cc603af0ca433065f7204e81a16a34f3a9e7b6f3d8e5c5882ab0e5d6af049434&Culture=sv-SE\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				}
			]
		},
		{
			"name": "Swish",
			"item": [
				{
					"name": "create payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const paymentId = responseBody.payment.id;\r",
									"    pm.environment.set(\"paymentId\", paymentId);\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId,\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Swish\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        },\n        \"prefillInfo\": {\n        \t\"msisdn\": \"{{msisdn}}\"\n        }\n    },\n    \"swish\": {\n    \t\"enableEcomOnly\": true\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/psp/swish/payments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"psp",
								"swish",
								"payments"
							]
						}
					},
					"response": [
						{
							"name": "create payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Swish\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference123897\",\n            \"payeeName\": \"test merchant\"\n        },\n        \"prefillInfo\": {\n        \t\"msisdn\": \"+46765432198\"\n        }\n    },\n    \"swish\": {\n    \t\"enableEcomOnly\": true\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:39:14 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1796"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe\",\n        \"number\": 44100217657,\n        \"created\": \"2020-05-22T11:39:14.9328212Z\",\n        \"updated\": \"2020-05-22T11:39:14.9351713Z\",\n        \"instrument\": \"Swish\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe\",\n            \"rel\": \"update-payment-abort\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/swish/payments/fd4839d4-98f8-42ec-8c77-08d7fcb702fe/sales\",\n            \"rel\": \"create-sale\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/swish/payments/sales/5dafbb57f67e697a976cb91630144961b7fe575eac54223bd00c9d64b81bcdc3\",\n            \"rel\": \"redirect-sale\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/swish/core/scripts/client/px.swish.client.js?token=5dafbb57f67e697a976cb91630144961b7fe575eac54223bd00c9d64b81bcdc3&Culture=sv-SE\",\n            \"rel\": \"view-sales\",\n            \"contentType\": \"application/javascript\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/swish/core/scripts/client/px.swish.client.js?token=5dafbb57f67e697a976cb91630144961b7fe575eac54223bd00c9d64b81bcdc3&Culture=sv-SE\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "accomplish sale",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const sale = responseBody.sale;\r",
									"    const transactionId = sale.id;\r",
									"    \r",
									"    pm.environment.set(\"transactionId\", transactionId);\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n    \t\"msisdn\": \"{{msisdn}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationDirectPayment}}",
							"host": [
								"{{operationDirectPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "accomplish sale",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n    \t\"msisdn\": \"+46765432198\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/a9eab04d-11ed-4ad8-10c3-08d807aa8d43/sales",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"a9eab04d-11ed-4ad8-10c3-08d807aa8d43",
										"sales"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/swish/payments/a9eab04d-11ed-4ad8-10c3-08d807aa8d43/sales/8012bbf9-73ac-41a1-e182-08d807a9e921"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 06:04:40 GMT"
								},
								{
									"key": "Content-Length",
									"value": "656"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/swish/payments/a9eab04d-11ed-4ad8-10c3-08d807aa8d43\",\n    \"sale\": {\n        \"date\": \"6/4/2020 6:04:41 AM +00:00\",\n        \"swishFlowType\": \"EcomSwishFlow\",\n        \"isPaymentRestrictedToSocialSecurityNumber\": false,\n        \"id\": \"/psp/swish/payments/a9eab04d-11ed-4ad8-10c3-08d807aa8d43/sales/8012bbf9-73ac-41a1-e182-08d807a9e921\",\n        \"transaction\": {\n            \"id\": \"8012bbf9-73ac-41a1-e182-08d807a9e921\",\n            \"created\": \"2020-06-04T06:04:40.3161922Z\",\n            \"updated\": \"2020-06-04T06:04:40.8646866Z\",\n            \"type\": \"Sale\",\n            \"state\": \"AwaitingActivity\",\n            \"number\": 44100228579,\n            \"amount\": 10000,\n            \"vatAmount\": 0,\n            \"description\": \"test description\",\n            \"payeeReference\": \"someUniqueReference1591250667\",\n            \"isOperational\": true,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 10000,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 10000,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590147688\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"4091418c-5280-464d-04ba-08d7fcb66e59",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "621"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals/da71a1cc-8000-4739-9117-08d7fcb6709e"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:41:29 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59\",\n    \"reversal\": {\n        \"description\": \"your description\",\n        \"date\": \"5/22/2020 11:41:29 AM +00:00\",\n        \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals/da71a1cc-8000-4739-9117-08d7fcb6709e\",\n        \"transaction\": {\n            \"id\": \"da71a1cc-8000-4739-9117-08d7fcb6709e\",\n            \"created\": \"2020-05-22T11:41:29.1564849Z\",\n            \"updated\": \"2020-05-22T11:41:29.5028537Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"AwaitingActivity\",\n            \"number\": 44100217660,\n            \"amount\": 10000,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590147688\",\n            \"isOperational\": true,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Get payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"4091418c-5280-464d-04ba-08d7fcb66e59"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:42:17 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1472"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59\",\n        \"number\": 44100217658,\n        \"created\": \"2020-05-22T11:41:08.6229167Z\",\n        \"updated\": \"2020-05-22T11:41:37.4947661Z\",\n        \"instrument\": \"Swish\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/prices\"\n        },\n        \"amount\": 10000,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/transactions\"\n        },\n        \"sales\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/sales\"\n        },\n        \"reversals\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/paid\",\n            \"rel\": \"paid-payment\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/swish/core/scripts/client/px.swish.client.js?token=540b59d09b8de6c66a20f166826ee27ca21d849e4af15633fa157a0a2a3ab709&Culture=sv-SE\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get sales",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/sales",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"sales"
							]
						}
					},
					"response": [
						{
							"name": "Get sales",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/sales",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"4091418c-5280-464d-04ba-08d7fcb66e59",
										"sales"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "875"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:43:04 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59\",\n    \"sales\": {\n        \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/sales\",\n        \"saleList\": [\n            {\n                \"date\": \"5/22/2020 11:41:13 AM +00:00\",\n                \"payerAlias\": \"46739000001\",\n                \"swishPaymentReference\": \"5631C5B480064030B9B72048FAB44A1B\",\n                \"swishStatus\": \"PAID\",\n                \"swishFlowType\": \"EcomSwishFlow\",\n                \"isPaymentRestrictedToSocialSecurityNumber\": false,\n                \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/sales/e24edb21-a73d-4ed8-a0d1-08d7fcb7040b\",\n                \"transaction\": {\n                    \"id\": \"e24edb21-a73d-4ed8-a0d1-08d7fcb7040b\",\n                    \"created\": \"2020-05-22T11:41:13.3236918Z\",\n                    \"updated\": \"2020-05-22T11:41:17.7224434Z\",\n                    \"type\": \"Sale\",\n                    \"state\": \"Completed\",\n                    \"number\": 44100217659,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1590147667\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737566,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"4091418c-5280-464d-04ba-08d7fcb66e59",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "668"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:43:19 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59\",\n    \"reversals\": {\n        \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/swish/payments/4091418c-5280-464d-04ba-08d7fcb66e59/reversals/da71a1cc-8000-4739-9117-08d7fcb6709e\",\n                \"transaction\": {\n                    \"id\": \"da71a1cc-8000-4739-9117-08d7fcb6709e\",\n                    \"created\": \"2020-05-22T11:41:29.1564849Z\",\n                    \"updated\": \"2020-05-22T11:41:37.4947669Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 44100217660,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590147688\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737566,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"swish",
										"payments",
										"f408350c-5806-422e-8c78-08d7fcb702fe"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "1214"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 11:43:32 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe\",\n        \"number\": 44100217661,\n        \"created\": \"2020-05-22T11:43:30.9779893Z\",\n        \"updated\": \"2020-05-22T11:43:32.2797772Z\",\n        \"instrument\": \"Swish\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Aborted\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/swish/payments/f408350c-5806-422e-8c78-08d7fcb702fe/aborted\",\n            \"rel\": \"aborted-payment\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/swish/core/scripts/client/px.swish.client.js?token=b6490eb73aa894892ea2bcafcaf94630f66552a3dc1fc09f50f96761f5f00ee3&Culture=sv-SE\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				}
			]
		},
		{
			"name": "Trustly",
			"item": [
				{
					"name": "create payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const paymentId = responseBody.payment.id;\r",
									"    pm.environment.set(\"paymentId\", paymentId);\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId,\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Trustly\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        }\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/psp/trustly/payments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"psp",
								"trustly",
								"payments"
							]
						}
					},
					"response": [
						{
							"name": "create payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"currency\": \"SEK\",\n        \"prices\": [\n            {\n                \"type\": \"Trustly\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/Host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Complete\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/Callbback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"734310b0-f9b5-48ea-b730-b3628d907f0c\",\n            \"payeeReference\": \"someUniquereference123897\",\n            \"payeeName\": \"test merchant\"\n        }\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.stage.payex.com/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 05:45:09 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1504"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0\",\n        \"number\": 79100021349,\n        \"created\": \"2020-06-04T05:45:09.4697173Z\",\n        \"updated\": \"2020-06-04T05:45:09.8015639Z\",\n        \"instrument\": \"Trustly\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.25.0\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0\",\n            \"rel\": \"update-payment-abort\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/trustly/payments/15016e9d-c741-47a5-a24a-08d8082bd0c0/sales\",\n            \"rel\": \"create-sale\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/trustly/payments/sales/2d65f35201ef89465f8b0513390f9c4deb235365885ab186f329e9385632b006\",\n            \"rel\": \"redirect-sale\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/trustly/core/scripts/client/px.trustly.client.js?token=2d65f35201ef89465f8b0513390f9c4deb235365885ab186f329e9385632b006&operation=sale\",\n            \"rel\": \"view-sales\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "accomplish sale",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const sale = responseBody.sale;\r",
									"    const transactionId = sale.id;\r",
									"    \r",
									"    pm.environment.set(\"transactionId\", transactionId);\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n    \t\"firstName\": \"{{consumerFirstName}}\",\n    \t\"lastName\": \"{{}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationDirectPayment}}",
							"host": [
								"{{operationDirectPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "accomplish sale",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n    \t\"firstName\": \"Azra\",\n    \t\"lastName\": \"Oliveira\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments/b2c8a513-b581-4ec1-a24c-08d8082bd0c0/sales",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments",
										"b2c8a513-b581-4ec1-a24c-08d8082bd0c0",
										"sales"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.stage.payex.com/psp/trustly/payments/b2c8a513-b581-4ec1-a24c-08d8082bd0c0/sales/332daa81-f5b9-4249-2b51-08d8082bd132"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 05:50:42 GMT"
								},
								{
									"key": "Content-Length",
									"value": "812"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/trustly/payments/b2c8a513-b581-4ec1-a24c-08d8082bd0c0\",\n    \"sale\": {\n        \"id\": \"/psp/trustly/payments/b2c8a513-b581-4ec1-a24c-08d8082bd0c0/sales/332daa81-f5b9-4249-2b51-08d8082bd132\",\n        \"transaction\": {\n            \"id\": \"/psp/trustly/payments/b2c8a513-b581-4ec1-a24c-08d8082bd0c0/transactions/332daa81-f5b9-4249-2b51-08d8082bd132\",\n            \"created\": \"2020-06-04T05:50:42.1690877Z\",\n            \"updated\": \"2020-06-04T05:50:42.7268213Z\",\n            \"type\": \"Sale\",\n            \"state\": \"AwaitingActivity\",\n            \"number\": 79100021354,\n            \"amount\": 10000,\n            \"vatAmount\": 0,\n            \"description\": \"test description\",\n            \"payeeReference\": \"someUniqueReference1591249839\",\n            \"isOperational\": true,\n            \"operations\": [\n                {\n                    \"method\": \"GET\",\n                    \"href\": \"https://test.trustly.com/_/orderclient.php?SessionID=6b66a08b-c94d-4298-bb02-079bd64b0ea7&OrderID=2205679201&Locale=sv_SE\",\n                    \"rel\": \"redirect-trustly\",\n                    \"contentType\": \"text/html\"\n                }\n            ]\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 10000,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 10000,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1591251231\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments",
										"1c983539-82b9-461f-9322-08d807b36993",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/reversals/c7c345d4-a9e3-4f90-3ceb-08d8084e3c65"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 06:13:52 GMT"
								},
								{
									"key": "Content-Length",
									"value": "650"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993\",\n    \"reversal\": {\n        \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/reversals/c7c345d4-a9e3-4f90-3ceb-08d8084e3c65\",\n        \"transaction\": {\n            \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/transactions/c7c345d4-a9e3-4f90-3ceb-08d8084e3c65\",\n            \"created\": \"2020-06-04T06:13:52.1814712Z\",\n            \"updated\": \"2020-06-04T06:13:53.0088551Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"Completed\",\n            \"number\": 49100000142,\n            \"amount\": 10000,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1591251231\",\n            \"isOperational\": false,\n            \"reconciliationNumber\": 737579,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Get successful payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments",
										"a086f5ae-a6a5-440a-a24b-08d8082bd0c0"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 05:49:35 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1308"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0\",\n        \"number\": 79100021351,\n        \"created\": \"2020-06-04T05:48:53.1212935Z\",\n        \"updated\": \"2020-06-04T05:49:25.9179939Z\",\n        \"instrument\": \"Trustly\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Ready\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/prices\"\n        },\n        \"amount\": 10000,\n        \"remainingReversalAmount\": 10000,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.25.0\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"transactions\": {\n            \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/transactions\"\n        },\n        \"sales\": {\n            \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/sales\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/reversals\",\n            \"rel\": \"create-reversal\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/trustly/payments/a086f5ae-a6a5-440a-a24b-08d8082bd0c0/paid\",\n            \"rel\": \"paid-payment\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get sales",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/sales",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"sales"
							]
						}
					},
					"response": [
						{
							"name": "Get sales",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/sales",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments",
										"1c983539-82b9-461f-9322-08d807b36993",
										"sales"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 06:13:11 GMT"
								},
								{
									"key": "Content-Length",
									"value": "726"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993\",\n    \"sales\": {\n        \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/sales\",\n        \"saleList\": [\n            {\n                \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/sales/75759682-a663-457c-3cea-08d8084e3c65\",\n                \"transaction\": {\n                    \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/transactions/75759682-a663-457c-3cea-08d8084e3c65\",\n                    \"created\": \"2020-06-04T06:12:18.4511785Z\",\n                    \"updated\": \"2020-06-04T06:12:52.2524891Z\",\n                    \"type\": \"Sale\",\n                    \"state\": \"Completed\",\n                    \"number\": 49100000141,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1591251133\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737579,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments",
										"1c983539-82b9-461f-9322-08d807b36993",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "746"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 06:15:02 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993\",\n    \"reversals\": {\n        \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/reversals/c7c345d4-a9e3-4f90-3ceb-08d8084e3c65\",\n                \"transaction\": {\n                    \"id\": \"/psp/trustly/payments/1c983539-82b9-461f-9322-08d807b36993/transactions/c7c345d4-a9e3-4f90-3ceb-08d8084e3c65\",\n                    \"created\": \"2020-06-04T06:13:52.1814712Z\",\n                    \"updated\": \"2020-06-04T06:13:53.0088551Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 49100000142,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1591251231\",\n                    \"isOperational\": false,\n                    \"reconciliationNumber\": 737579,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"trustly",
										"payments",
										"b0c82a65-7dce-461e-d955-08d807b2b481"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Thu, 04 Jun 2020 06:15:32 GMT"
								},
								{
									"key": "Content-Length",
									"value": "969"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481\",\n        \"number\": 49100000143,\n        \"created\": \"2020-06-04T06:15:27.5571146Z\",\n        \"updated\": \"2020-06-04T06:15:32.5312024Z\",\n        \"instrument\": \"Trustly\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Sale\",\n        \"state\": \"Aborted\",\n        \"currency\": \"SEK\",\n        \"prices\": {\n            \"id\": \"/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.25.0\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"sv-SE\",\n        \"urls\": {\n            \"id\": \"/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/trustly/payments/b0c82a65-7dce-461e-d955-08d807b2b481/aborted\",\n            \"rel\": \"aborted-payment\"\n        }\n    ]\n}"
						}
					]
				}
			]
		},
		{
			"name": "Vipps",
			"item": [
				{
					"name": "create payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const paymentId = responseBody.payment.id;\r",
									"    pm.environment.set(\"paymentId\", paymentId);\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId,\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"NOK\",\n        \"prices\": [\n            {\n                \"type\": \"Vipps\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"{{description}}\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"{{language}}\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"{{hostUrl}}\"\n    \t\t],\n            \"completeUrl\": \"{{completeUrl}}\",\n            \"cancelUrl\": \"{{cancelUrl}}\",\n            \"callbackUrl\": \"{{callbackUrl}}\",\n            \"termsOfServiceUrl\": \"{{ToSUrl}}\",\n            \"logoUrl\": \"{{logoUrl}}\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"{{merchantId}}\",\n            \"payeeReference\": \"{{payeeReference}}\",\n            \"payeeName\": \"{{merchantName}}\"\n        },\n        \"prefillInfo\": {\n        \t\"msisdn\": \"{{msisdn}}\"\n        }\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/psp/vipps/payments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"psp",
								"vipps",
								"payments"
							]
						}
					},
					"response": [
						{
							"name": "create payment",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"currency\": \"NOK\",\n        \"prices\": [\n            {\n                \"type\": \"Vipps\",\n                \"amount\": 10000,\n                \"vatAmount\": 0\n            }\n        ],\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"nb-NO\",\n        \"urls\": {\n        \t\"hostUrls\": [\n        \t\t\"https://en.wikipedia.org/wiki/host\"\n    \t\t],\n            \"completeUrl\": \"https://en.wikipedia.org/wiki/Success\",\n            \"cancelUrl\": \"https://en.wikipedia.org/wiki/Cancel\",\n            \"callbackUrl\": \"https://en.wikipedia.org/wiki/callback\",\n            \"termsOfServiceUrl\": \"https://en.wikipedia.org/wiki/Terms_Of_Service\",\n            \"logoUrl\": \"https://design.swedbankpay.com/v/4.5.0/img/swedbankpay-logo.svg\"\n        },\n        \"payeeInfo\": {\n            \"payeeId\": \"cdff105b-1879-4d10-a83b-7bd7115cffef\",\n            \"payeeReference\": \"someUniqueReference4357828374\",\n            \"payeeName\": \"Test merchant\"\n        },\n        \"prefillInfo\": {\n        \t\"msisdn\": \"+4648060276\"\n        }\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:26:06 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1689"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n        \"number\": 42100038543,\n        \"created\": \"2020-05-22T08:26:07.0724844Z\",\n        \"updated\": \"2020-05-22T08:26:06.8139219Z\",\n        \"instrument\": \"Vipps\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"NOK\",\n        \"prices\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"nb-NO\",\n        \"urls\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"PATCH\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n            \"rel\": \"update-payment-abort\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/vipps/payments/authorize/58d2ef439e3644e7779477e8b5cfc943914a196d0792a5f47560d33f5f0b83c7?Culture=nb-NO\",\n            \"rel\": \"redirect-authorization\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/vipps/core/scripts/client/px.vipps.client.js?token=58d2ef439e3644e7779477e8b5cfc943914a196d0792a5f47560d33f5f0b83c7&Culture=nb-NO\",\n            \"rel\": \"view-authorization\",\n            \"contentType\": \"application/javascript\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/vipps/core/scripts/client/px.vipps.client.js?token=58d2ef439e3644e7779477e8b5cfc943914a196d0792a5f47560d33f5f0b83c7&Culture=nb-NO\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Capture payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcapturePayment}}",
							"host": [
								"{{operationcapturePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Capture payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1001,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590136272\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"captures"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures/3a579700-3f27-4528-c1ad-08d7fcc00d7a"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:31:13 GMT"
								},
								{
									"key": "Content-Length",
									"value": "609"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"capture\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures/3a579700-3f27-4528-c1ad-08d7fcc00d7a\",\n        \"transaction\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/3a579700-3f27-4528-c1ad-08d7fcc00d7a\",\n            \"created\": \"2020-05-22T08:31:13.267586Z\",\n            \"updated\": \"2020-05-22T08:31:13.4013999Z\",\n            \"type\": \"Capture\",\n            \"state\": \"Completed\",\n            \"number\": 42100038545,\n            \"amount\": 1001,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590136272\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Reverse payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationreversePayment}}",
							"host": [
								"{{operationreversePayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Reverse payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"amount\": 1,\n        \"vatAmount\": 0,\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590136390\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"reversals"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/reversals/bdce38ab-fdcc-4ed6-c68c-08d7fcc023d1"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:33:10 GMT"
								},
								{
									"key": "Content-Length",
									"value": "609"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"reversal\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/reversals/bdce38ab-fdcc-4ed6-c68c-08d7fcc023d1\",\n        \"transaction\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/bdce38ab-fdcc-4ed6-c68c-08d7fcc023d1\",\n            \"created\": \"2020-05-22T08:33:11.481887Z\",\n            \"updated\": \"2020-05-22T08:33:11.3961337Z\",\n            \"type\": \"Reversal\",\n            \"state\": \"Completed\",\n            \"number\": 42100038546,\n            \"amount\": 1,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590136390\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Cancel payment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"{{payeeReference}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationcancelPayment}}",
							"host": [
								"{{operationcancelPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Cancel payment",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transaction\": {\n        \"description\": \"your description\",\n        \"payeeReference\": \"someUniqueReference1590136681\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"cancellations"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Location",
									"value": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations/7e0c5df9-59cf-4b3b-c68e-08d7fcc023d1"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:38:01 GMT"
								},
								{
									"key": "Content-Length",
									"value": "625"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"cancellation\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations/7e0c5df9-59cf-4b3b-c68e-08d7fcc023d1\",\n        \"transaction\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/7e0c5df9-59cf-4b3b-c68e-08d7fcc023d1\",\n            \"created\": \"2020-05-22T08:38:02.7195737Z\",\n            \"updated\": \"2020-05-22T08:38:02.4086825Z\",\n            \"type\": \"Cancellation\",\n            \"state\": \"Completed\",\n            \"number\": 42100038548,\n            \"amount\": 8999,\n            \"vatAmount\": 0,\n            \"description\": \"your description\",\n            \"payeeReference\": \"someUniqueReference1590136681\",\n            \"isOperational\": false,\n            \"operations\": []\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"responseCode = pm.response.code;\r",
									"responseBody = pm.response.json();\r",
									"\r",
									"if (responseCode >= 200 && responseCode < 300) {\r",
									"    // Finding the values to set to globals\r",
									"    const operations = responseBody.operations;\r",
									"    const listOfOperations = utils.sortOperations(operations);\r",
									"    listOfOperations.forEach(item => {\r",
									"        pm.globals.set(item.name, item.value ? item.value.href : \"N/A\");\r",
									"    });\r",
									"    const html = utils.getVisualizerHTML();\r",
									"    const visualizerData = {\r",
									"        paymentId: pm.variables.get(\"paymentId\"),\r",
									"        operations\r",
									"    }\r",
									"    pm.visualizer.set(html, {\r",
									"        response: visualizerData\r",
									"    });\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							]
						}
					},
					"response": [
						{
							"name": "Get payment",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:30:32 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1802"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n        \"number\": 42100038543,\n        \"created\": \"2020-05-22T08:26:07.0724844Z\",\n        \"updated\": \"2020-05-22T08:30:22.1580058Z\",\n        \"instrument\": \"Vipps\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Ready\",\n        \"currency\": \"NOK\",\n        \"prices\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/prices\"\n        },\n        \"amount\": 10000,\n        \"remainingCaptureAmount\": 10000,\n        \"remainingCancellationAmount\": 10000,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"nb-NO\",\n        \"transactions\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions\"\n        },\n        \"authorizations\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/authorizations\"\n        },\n        \"urls\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations\",\n            \"rel\": \"create-cancellation\"\n        },\n        {\n            \"method\": \"POST\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures\",\n            \"rel\": \"create-capture\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/paid\",\n            \"rel\": \"paid-payment\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/vipps/core/scripts/client/px.vipps.client.js?token=58d2ef439e3644e7779477e8b5cfc943914a196d0792a5f47560d33f5f0b83c7&Culture=nb-NO\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get authorization",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/authorizations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"authorizations"
							]
						}
					},
					"response": [
						{
							"name": "Get authorization",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/authorizations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"authorizations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:31:51 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1310"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"authorizations\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/authorizations\",\n        \"authorizationList\": [\n            {\n                \"merchantOrderId\": \"42100038544\",\n                \"pspTransactionId\": \"42100038544\",\n                \"vippsRedirectUrl\": \"https://fakeservices.externalintegration.payex.com/psp/vipps/landingpage?msisdn=45612345&amount=10000&merchantserialnumber=100104&psptransactionid=42100038544&makepaymenturl=https://api.externalintegration.payex.com/psp/creditcard/confined/payments/vipps/v2/makepayment&pspRedirectUrl=https://ecom.externalintegration.payex.com/vipps/payments/authorize/58d2ef439e3644e7779477e8b5cfc943914a196d0792a5f47560d33f5f0b83c7?culture=nb-no&thirdpartyreturn=true\",\n                \"msisdn\": \"+4745612345\",\n                \"isApp\": false,\n                \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/authorizations/1ea233fc-327a-4b29-c1ac-08d7fcc00d7a\",\n                \"transaction\": {\n                    \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/1ea233fc-327a-4b29-c1ac-08d7fcc00d7a\",\n                    \"created\": \"2020-05-22T08:30:16.5233265Z\",\n                    \"updated\": \"2020-05-22T08:30:22.1580062Z\",\n                    \"type\": \"Authorization\",\n                    \"state\": \"Completed\",\n                    \"number\": 42100038544,\n                    \"amount\": 10000,\n                    \"vatAmount\": 0,\n                    \"description\": \"test description\",\n                    \"payeeReference\": \"someUniqueReference1590135966\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get captures",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/captures",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"captures"
							]
						}
					},
					"response": [
						{
							"name": "Get captures",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"captures"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Length",
									"value": "701"
								},
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:32:32 GMT"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"captures\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures\",\n        \"captureList\": [\n            {\n                \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/captures/3a579700-3f27-4528-c1ad-08d7fcc00d7a\",\n                \"transaction\": {\n                    \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/3a579700-3f27-4528-c1ad-08d7fcc00d7a\",\n                    \"created\": \"2020-05-22T08:31:13.267586Z\",\n                    \"updated\": \"2020-05-22T08:31:13.4013999Z\",\n                    \"type\": \"Capture\",\n                    \"state\": \"Completed\",\n                    \"number\": 42100038545,\n                    \"amount\": 1001,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590136272\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get reversals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/reversals",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"reversals"
							]
						}
					},
					"response": [
						{
							"name": "Get reversals",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/reversals",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"reversals"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:33:56 GMT"
								},
								{
									"key": "Content-Length",
									"value": "703"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"reversals\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/reversals\",\n        \"reversalList\": [\n            {\n                \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/reversals/bdce38ab-fdcc-4ed6-c68c-08d7fcc023d1\",\n                \"transaction\": {\n                    \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/bdce38ab-fdcc-4ed6-c68c-08d7fcc023d1\",\n                    \"created\": \"2020-05-22T08:33:11.481887Z\",\n                    \"updated\": \"2020-05-22T08:33:11.3961337Z\",\n                    \"type\": \"Reversal\",\n                    \"state\": \"Completed\",\n                    \"number\": 42100038546,\n                    \"amount\": 1,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590136390\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Get cancellations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "",
								"type": "text",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}{{paymentId}}/cancellations",
							"host": [
								"{{baseUrl}}{{paymentId}}"
							],
							"path": [
								"cancellations"
							]
						}
					},
					"response": [
						{
							"name": "Get cancellations",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "",
										"type": "text",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"77e9c9ea-f891-41df-bd88-08d7fcc96242",
										"cancellations"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:39:25 GMT"
								},
								{
									"key": "Content-Length",
									"value": "727"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242\",\n    \"cancellations\": {\n        \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations\",\n        \"cancellationList\": [\n            {\n                \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/cancellations/7e0c5df9-59cf-4b3b-c68e-08d7fcc023d1\",\n                \"transaction\": {\n                    \"id\": \"/psp/vipps/payments/77e9c9ea-f891-41df-bd88-08d7fcc96242/transactions/7e0c5df9-59cf-4b3b-c68e-08d7fcc023d1\",\n                    \"created\": \"2020-05-22T08:38:02.7195737Z\",\n                    \"updated\": \"2020-05-22T08:38:02.4086825Z\",\n                    \"type\": \"Cancellation\",\n                    \"state\": \"Completed\",\n                    \"number\": 42100038548,\n                    \"amount\": 8999,\n                    \"vatAmount\": 0,\n                    \"description\": \"your description\",\n                    \"payeeReference\": \"someUniqueReference1590136681\",\n                    \"isOperational\": false,\n                    \"operations\": []\n                }\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "Abort payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{merchantToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{operationAbortPayment}}",
							"host": [
								"{{operationAbortPayment}}"
							]
						}
					},
					"response": [
						{
							"name": "Abort payment",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "",
										"value": "",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"payment\": {\n        \"operation\": \"Abort\",\n        \"abortReason\": \"CancelledByCustomer\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api.externalintegration.payex.com/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4\n",
									"protocol": "https",
									"host": [
										"api",
										"externalintegration",
										"payex",
										"com"
									],
									"path": [
										"psp",
										"vipps",
										"payments",
										"3a2299af-246f-467d-2b66-08d7fcc00ad4\n"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Server",
									"value": "Microsoft-IIS/8.5"
								},
								{
									"key": "X-Powered-By",
									"value": "ASP.NET"
								},
								{
									"key": "Date",
									"value": "Fri, 22 May 2020 08:39:51 GMT"
								},
								{
									"key": "Content-Length",
									"value": "1223"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=16070400; includeSubDomains"
								}
							],
							"cookie": [],
							"body": "{\n    \"payment\": {\n        \"id\": \"/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4\",\n        \"number\": 42100038549,\n        \"created\": \"2020-05-22T08:39:48.8919476Z\",\n        \"updated\": \"2020-05-22T08:39:51.1889969Z\",\n        \"instrument\": \"Vipps\",\n        \"operation\": \"Purchase\",\n        \"intent\": \"Authorization\",\n        \"state\": \"Aborted\",\n        \"currency\": \"NOK\",\n        \"prices\": {\n            \"id\": \"/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4/prices\"\n        },\n        \"amount\": 0,\n        \"description\": \"test description\",\n        \"payerReference\": \"AB1234\",\n        \"initiatingSystemUserAgent\": \"PostmanRuntime/7.24.1\",\n        \"userAgent\": \"Mozilla/5.0 Postman\",\n        \"language\": \"nb-NO\",\n        \"urls\": {\n            \"id\": \"/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4/urls\"\n        },\n        \"payeeInfo\": {\n            \"id\": \"/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4/payeeinfo\"\n        },\n        \"metadata\": {\n            \"id\": \"/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4/metadata\"\n        }\n    },\n    \"operations\": [\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://api.externalintegration.payex.com/psp/vipps/payments/3a2299af-246f-467d-2b66-08d7fcc00ad4/aborted\",\n            \"rel\": \"aborted-payment\"\n        },\n        {\n            \"method\": \"GET\",\n            \"href\": \"https://ecom.externalintegration.payex.com/vipps/core/scripts/client/px.vipps.client.js?token=6b5ee13a9203e9eafad8d26860250eefb4e0b57cb3dfcceb5069097e0875a3f8&Culture=nb-NO\",\n            \"rel\": \"view-payment\",\n            \"contentType\": \"application/javascript\"\n        }\n    ]\n}"
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"utils = {",
					"    findOperation: (operations = [], name = \"\") => {",
					"        return operations.find(operations => operations.rel === name);",
					"    },",
					"    operationStartsWith: (operation = [], name = \"\") => {",
					"        return operation.find(operations => operations.rel.startsWith(name));",
					"    },",
					"    sortOperations: (operations) => {",
					"        let listOfOperations = [];",
					"        const directPayment = utils.operationStartsWith(operations, 'direct-');",
					"        const redirectPayment = utils.operationStartsWith(operations, 'redirect-');",
					"        const seamlessPayment = utils.operationStartsWith(operations, 'direct-payment');",
					"        const abortPayment = utils.findOperation(operations, 'update-payment-abort');",
					"        const capturePayment = utils.findOperation(operations, 'create-capture');",
					"        const cancelPayment = utils.findOperation(operations, 'create-cancellation');",
					"        const reversePayment = utils.findOperation(operations, 'create-reversal');",
					"        const paidPayment = utils.findOperation(operations, 'paid-payment');",
					"        const approveLegalAddress = utils.findOperation(operations, 'create-approved-legal-address');",
					"        if (!paidPayment) {",
					"            /* ",
					"            *Use data to populate immediately relevant data to continue flow.",
					"            * These will only be set if the operation is found",
					"            * This is to avoid using data of wrong payment",
					"            * Furthermore you will get an error ",
					"            * when trying to use N/A data.",
					"            */",
					"            listOfOperations = addOperationToList(listOfOperations, \"operationDirectPayment\", directPayment);",
					"            listOfOperations = addOperationToList(listOfOperations, \"operationRedirectPayment\", redirectPayment);",
					"            listOfOperations = addOperationToList(listOfOperations, \"operationSeamlessPayment\", seamlessPayment);",
					"            listOfOperations = addOperationToList(listOfOperations, \"operationAbortPayment\", abortPayment);",
					"        }",
					"        else {",
					"            // this one has already been confirmed exists when setting it here.",
					"            listOfOperations = addOperationToList(listOfOperations, \"operationPaidPayment\", paidPayment);",
					"        }",
					"        listOfOperations = addOperationToList(listOfOperations, \"operationApproveLegalAddress\", approveLegalAddress);",
					"        listOfOperations = addOperationToList(listOfOperations, \"operationcapturePayment\", capturePayment);",
					"        listOfOperations = addOperationToList(listOfOperations, \"operationcancelPayment\", cancelPayment);",
					"        listOfOperations = addOperationToList(listOfOperations, \"operationreversePayment\", reversePayment);",
					"        return listOfOperations;",
					"    },",
					"    getVisualizerHTML: () => {",
					"        return template = `",
					"            <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script>",
					"            <script> ",
					"                function copyToClipboard(element) {",
					"                    var $temp = $(\"<input>\");",
					"                    $(\"body\").append($temp);",
					"                    $temp.val($(element).text()).select();",
					"                    document.execCommand(\"copy\");",
					"                    $temp.remove();",
					"                }",
					"            </script>",
					"            <script type=\"text/javascript\">",
					"                $(document).ready( () => { ",
					"                    var redirectButton  = $(\"button:contains('redirect')\");",
					"                    var seamlessButton = $(\"button:contains('view')\");",
					"                    var button = redirectButton ? redirectButton[0] : seamlessButton[0];",
					"                    button.click();",
					"                });",
					"            </script>",
					"            <style>",
					"                .main {",
					"                    background-color: #EEFFEE;",
					"                }",
					"                .centered {",
					"                    text-align: center;",
					"                }",
					"            </style>",
					"            <body class=\"main\">",
					"                <div class=\"centered\">",
					"                    <h5>PaymentID</h5>",
					"                    <p id=\"test\">{{response.paymentId}}</p>",
					"                </div>",
					"                <div class=\"centered\">",
					"                    <h5>Operations</h5>",
					"                    <table class=\"tftable\" border=\"1\">",
					"                        <tr>",
					"                            <th>rel</th>",
					"                            <th>QR code</th>",
					"                            <th>href</th>",
					"                        </tr>",
					"                    ",
					"                        {{#each response.operations}}",
					"                            <tr id=row_{{@key}}>",
					"                                <td id={{@key}}>",
					"                                    <button id={{rel}} onClick=\"copyToClipboard('#column_link_{{rel}}')\">{{rel}}</button>",
					"                                </td>",
					"                                <td id=column_qr_{{rel}}>",
					"                                    <img src=\"https://api.qrserver.com/v1/create-qr-code/?data={{href}}&amp;size=100x100\" alt=\"{{rel}}\"/><br>",
					"                                </td>",
					"                                <td id=column_link_{{rel}}><a href=\"{{href}}\">{{href}}</a></td>",
					"                            </tr>",
					"                        {{/each}}",
					"                    </table>",
					"                </div>",
					"            </body>",
					"        `;",
					"    }",
					"}",
					"function addOperationToList(array, operationName, operationValue) {",
					"    array.push({",
					"        name: operationName,",
					"        value: operationValue",
					"    });",
					"    return array;",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}